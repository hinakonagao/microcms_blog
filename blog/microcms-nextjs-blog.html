<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/4bc12c1be68739c7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4bc12c1be68739c7.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8d58b9228ffac9a6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8d58b9228ffac9a6.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-c491b2a411a4f8fa.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-101cfeaa18eb0e64.js" defer=""></script><script src="/_next/static/chunks/pages/_app-dbe722639694b405.js" defer=""></script><script src="/_next/static/chunks/451-2a25681c4cc4e942.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-7b5e07e6b1c54b77.js" defer=""></script><script src="/_next/static/0TYNhiW2GzUBjQtD0t7Rn/_buildManifest.js" defer=""></script><script src="/_next/static/0TYNhiW2GzUBjQtD0t7Rn/_ssgManifest.js" defer=""></script><script src="/_next/static/0TYNhiW2GzUBjQtD0t7Rn/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><style data-emotion="css a6by8m">.css-a6by8m{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:auto;}</style><div class="MuiGrid-root MuiGrid-container css-a6by8m"><style data-emotion="css d0aeej">.css-d0aeej{background-color:#FFF;color:#222;margin:30px auto;padding:36px;}.css-d0aeej h1,.css-d0aeej h2,.css-d0aeej h3{font-weight:550;}</style><style data-emotion="css vx8k43">.css-vx8k43{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:91.666667%;-ms-flex-preferred-size:91.666667%;flex-basis:91.666667%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:91.666667%;background-color:#FFF;color:#222;margin:30px auto;padding:36px;}@media (min-width:600px){.css-vx8k43{-webkit-flex-basis:91.666667%;-ms-flex-preferred-size:91.666667%;flex-basis:91.666667%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:91.666667%;}}@media (min-width:900px){.css-vx8k43{-webkit-flex-basis:75%;-ms-flex-preferred-size:75%;flex-basis:75%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:75%;}}@media (min-width:1200px){.css-vx8k43{-webkit-flex-basis:75%;-ms-flex-preferred-size:75%;flex-basis:75%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:75%;}}@media (min-width:1536px){.css-vx8k43{-webkit-flex-basis:75%;-ms-flex-preferred-size:75%;flex-basis:75%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:75%;}}.css-vx8k43 h1,.css-vx8k43 h2,.css-vx8k43 h3{font-weight:550;}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-11 MuiGrid-grid-md-9 css-vx8k43"><style data-emotion="css tph460">.css-tph460{padding:15px 0px;border-bottom:1px solid #4682B4;}</style><div class="css-tph460"><style data-emotion="css 1x4m838">.css-1x4m838{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;font-size:26px;font-weight:540;padding-bottom:16px;}</style><p class="MuiTypography-root MuiTypography-body1 css-1x4m838">microCMS × Next.js（TypeScript）で個人ブログを作る</p><style data-emotion="css q5vujz">.css-q5vujz{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;display:inline-block;padding-right:32px;}</style><p class="MuiTypography-root MuiTypography-body2 css-q5vujz"><style data-emotion="css 1eipbkb">.css-1eipbkb{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;font-size:15px;margin-right:4px;vertical-align:middle;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1eipbkb" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="AccessTimeIcon"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path><path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path></svg>投稿日 <!-- -->2/26/2022</p><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1eipbkb" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="LocalOfferIcon"><path d="m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"></path></svg><style data-emotion="css 1lc4u9f">.css-1lc4u9f{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;display:inline-block;padding-right:8px;}</style><p class="MuiTypography-root MuiTypography-body2 css-1lc4u9f">#<!-- -->Next.js</p><p class="MuiTypography-root MuiTypography-body2 css-1lc4u9f">#<!-- -->microCMS</p><p class="MuiTypography-root MuiTypography-body2 css-1lc4u9f">#<!-- -->TypeScript</p></div><style data-emotion="css il3arz">.css-il3arz{margin-top:40px;}.css-il3arz a{color:#639bb7;}.css-il3arz a:hover{color:#0b7eb8;-webkit-text-decoration:underline;text-decoration:underline;}</style><div class="css-il3arz"><html><head></head><body><h2 id="h9707d3a59a">概要</h2><p><code>microCMS</code>、<code>Next.js（TypeScript）</code>を使ってブログサイトを作成した手順と、追加で実装した機能について、またその過程で学んだことの備忘録記事です。<br><br>基本的には公式のチュートリアル通りに進めていますが、TypeScriptの型付けや記事内のコードブロックのハイライトなど詰まった箇所もあったので、まとめておきたいと思います。<br></p><ul><li>デプロイURL</li></ul><p><a href="https://microcms-blog-hinakonagao.vercel.app/" target="_blank" rel="noopener noreferrer">https://microcms-blog-hinakonagao.vercel.app</a><br></p><ul><li>GitHub</li></ul><p><a href="https://github.com/hinakonagao/microcms_blog" target="_blank" rel="noopener noreferrer">https://github.com/hinakonagao/microcms_blog</a><br><br>※この記事ではページのスタイリングは解説しません。<br>MaterialUIを主に使用してスタイリングを行っているので、詳しいコードはGitHubをご覧いただければと思います。<br></p><h3 id="h48162eced8">使用技術</h3><ul><li>Next.js　12.0.10</li><li>React　17.0.2</li><li>TypeScript　4.5.5</li><li>ESLint　8.8.0</li><li>prettier　2.5.1</li></ul><p><br></p><h2 id="hc953739b3f">全体の流れ</h2><p>１．microCMSの準備（アカウント作成・記事コンテンツのAPI作成）<br>２．Next.jsのプロジェクト作成<br>３．APIリクエストのための環境変数の設定<br>４．公式のSDK「microcms-js-sdk」の導入<br>５．記事一覧画面の作成<br>６．記事詳細画面の作成<br>７．コードブロックのシンタックスハイライトの実装<br>８．【おまけ】タグでの絞り込み機能の実装<br>９．【おまけ】ページネーション機能の実装<br><br>というような流れで説明していきます。<br></p><h2 id="hd1205c1797">1. microCMSの準備</h2><p>まずはmicroCMSのアカウントを作成し、APIを作成します。<br><br>手順は公式のチュートリアルに詳しく書かれているので、ここでの説明は割愛します。<br><a style="color:#4aac00" href="https://blog.microcms.io/microcms-next-jamstack-blog/#:%7E:text=%E3%81%8C%E7%AB%8B%E3%81%A1%E4%B8%8A%E3%81%8C%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82-,2.%20microCMS%E3%81%AE%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B,-%E6%AC%A1%E3%81%AB%E3%80%81microCMS%E3%81%A7" target="_blank" rel="noopener noreferrer">microCMS + Next.jsでJamstackブログを作ってみよう　2. microCMSの用意する</a><br><br>私は&nbsp;<code>blog</code>&nbsp;と&nbsp;<code>tag</code>&nbsp;の2つのAPIエンドポイントを作成しました。<br></p><h3 id="hebabef9705">blog</h3><p>ブログコンテンツを登録しておくリスト形式の API です。</p><ul><li>title：記事タイトル</li><li>body：記事本文</li><li>tags：タグ（別のエンドポイント&nbsp;<code>/tag</code>&nbsp;に登録したタグを複数参照できるように設定）</li><li>image：表示する画像名（プロジェクトディレクトリに保存した画像の中から、ブラウザに表示する画像を指定するために使用）</li></ul><p><br><img src="https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/577556386f954864b763ec82bdea4d3c/blog.jpg" alt=""><br></p><h3 id="h1d9b92c0c9">tag</h3><p>ブログ記事に紐づけるタグを登録しておくリスト形式の API です。<br><br><img src="https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/24cd3d349eb74b35a9ee5ca8f901543a/tag.jpg" alt=""><br></p><h2 id="hce660a84c7">2. Next.jsプロジェクトを作成する</h2><p>下記のコマンドを実行してNext.jsのプロジェクトを作成し、続けて開発サーバーを立ち上げます。</p><pre><code class="hljs">$ yarn create <span class="hljs-keyword">next</span>-app --typescript
<span class="hljs-regexp">//</span> プロジェクト名の入力を求められるので入力する

$ cd .<span class="hljs-regexp">/microcms_blog/</span>

$ yarn dev</code></pre><p><br>次に<code>src</code>ディレクトリを作成して、<code>pages</code>ディレクトリと<code>styles</code>ディレクトリを<code>src</code>ディレクトリの配下に移動させます。</p><pre><code class="hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">mkdir</span> src &amp;&amp; <span class="hljs-built_in">mv</span> pages src &amp;&amp; <span class="hljs-built_in">mv</span> styles src</span></code></pre><p><br>さらに、モジュールのインポートを絶対パスで指定できるよう、ベースURLを&nbsp;<code>src</code>&nbsp;ディレクトリに設定します。</p><pre><code class="hljs"><span class="hljs-regexp">//</span> tsconfig.json
{
  <span class="hljs-string">"compilerOptions"</span>: {
    <span class="hljs-regexp">//</span> 追加
    <span class="hljs-string">"baseUrl"</span>: <span class="hljs-string">"src"</span>
  }
}</code></pre><p>ベースURLの設定についてはこちらの記事を参考にさせていただきました。<br><a href="https://fwywd.com/tech/next-base-url" target="_blank" rel="noopener noreferrer">【Next.js】特定のディレクトリを基準にし、絶対パスでモジュールをインポートする方法 | fwywd（フュード）powered by キ...</a><br></p><h2 id="ha56333b74a">ESLint / Prettier</h2><p>Next.js のバージョン11 からは、デフォルトでESLintが搭載されています。<br>ESLintに関するインストール済のパッケージは以下の2つです。</p><pre><code class="hljs"><span class="hljs-regexp">//</span> package.json
{
  ...
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"eslint"</span>: <span class="hljs-string">"8.8.0"</span>,    <span class="hljs-regexp">//</span> 構文解析のエンジン
    <span class="hljs-string">"eslint-config-next"</span>: <span class="hljs-string">"12.0.10"</span>,    <span class="hljs-regexp">//</span> ESLintのルール
  }
  ...
}</code></pre><p><br>Next.js の新規プロジェクト作成時に生成された&nbsp;<code>.eslintrc</code>&nbsp;は ESLint の設定ファイルを意味しており、<strong>デフォルトで&nbsp;</strong><strong><code>eslint-config-next</code></strong><strong>&nbsp;の設定が適用</strong>されています。（ルールの詳細は後述）</p><pre><code class="hljs"><span class="hljs-regexp">//</span> .eslintrc.json

{
  <span class="hljs-string">"extends"</span>: <span class="hljs-string">"next/core-web-vitals"</span>,
}

</code></pre><p><br>少しだけESLintの設定を加えます。</p><pre><code class="hljs"><span class="hljs-regexp">//</span> .eslintrc.json

{
  <span class="hljs-string">"extends"</span>: <span class="hljs-string">"next/core-web-vitals"</span>,
  <span class="hljs-regexp">//</span> 以下のルールを追記
  <span class="hljs-string">"rules"</span>: {
    <span class="hljs-string">"react/display-name"</span>: <span class="hljs-string">"off"</span>,
    <span class="hljs-string">"react-hooks/exhaustive-deps"</span>: <span class="hljs-string">"off"</span>,
    <span class="hljs-string">"@next/next/no-sync-scripts"</span>: <span class="hljs-string">"off"</span>
  }
}</code></pre><p><br>Prettier は含まれていないため、インストールしておきます。</p><pre><code class="hljs">$ yarn -DE <span class="hljs-keyword">add </span>prettier eslint-<span class="hljs-built_in">config</span>-prettier</code></pre><h2 id="h5095390624"><br>3. 環境変数の設定</h2><p>microCMSのAPIへアクセスする際は、サービスドメインを指定し、リクエストにそのサービスドメインのAPIキーを含める事でデータを取得することができます。<br><br>※microCMSでのAPIキーの作成方法は公式ページを参照ください。<br><a style="color:#4aac00" href="https://document.microcms.io/content-api/x-microcms-api-key" target="_blank" rel="noopener noreferrer">APIキー（X-MICROCMS-API-KEY）</a><br><br>まずは環境変数を管理するファイルを作成します。<br>※&nbsp;<code>.local</code>をつけるとローカル環境で使うことができ、&nbsp;<code>.development</code>をつけると開発環境で使えます。</p><pre><code class="hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">touch</span> .env.development.local</span></code></pre><p><br><code>.env.development.local</code>ファイルを作成したら、<code>サービスドメイン</code>とmicroCMSの<code>APIキー</code>を書き込みます。<br>※サービスドメインは、例えば自分のmicroCMSページのURLが&nbsp;<code>https://aiueo.microcms.io/</code>&nbsp;であれば&nbsp;<code>aiueo</code>&nbsp;の部分になります。</p><pre><code class="hljs"><span class="hljs-attr">SERVICE_DOMAIN</span>=xxxxxxxxxxx
<span class="hljs-attr">API_KEY</span>=xxxxxxxxxxxx</code></pre><p><br><code>env</code>&nbsp;ファイルに書いた値は、以下のようにしてプロジェクト内で参照することができます。</p><pre><code class="hljs">process.env.API_KEY</code></pre><h2 id="h84f24c70f8"><br>4.microcms-js-sdkの準備</h2><p>APIリクエストには公式が提供している<code>microcms-js-sdk</code>を使います。<br><br>まずは<code>microcms-js-sdk</code>をインストールします。</p><pre><code class="hljs">$ yarn <span class="hljs-built_in">add</span> microcms-js-sdk</code></pre><p><br><code>libs/client.ts</code>&nbsp;を作成してSDKの初期化を行います。</p><pre><code class="hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">mkdir</span> src/libs</span>
<span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">touch</span> ./src/libs/client.ts</span></code></pre><p><br><code>serviceDomain</code>&nbsp;と&nbsp;<code>apiKey</code>&nbsp;の値は&nbsp;<code>env</code>&nbsp;ファイルを参照します。</p><pre><code class="hljs"><span class="hljs-comment">// libs/client.ts</span>

<span class="hljs-keyword">import</span> { createClient } from <span class="hljs-string">"microcms-js-sdk"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> client = <span class="hljs-built_in">createClient</span>({
  serviceDomain: process.env.SERVICE_DOMAIN || <span class="hljs-string">""</span>,
  apiKey: process.env.API_KEY || <span class="hljs-string">""</span>,
});</code></pre><p><br>※<code>serviceDomain</code>&nbsp;と&nbsp;<code>apiKey</code>&nbsp;は&nbsp;<code>string</code>型、.envファイルから参照する環境変数は&nbsp;<code>string | undefined</code>型なので、もし以下のように&nbsp;<code>|| ""</code>&nbsp;の部分を書かないとエラーが出ます。</p><pre><code class="hljs">serviceDomain: process.env.SERVICE_DOMAIN
<span class="hljs-regexp">//</span> 型 <span class="hljs-string">'string | undefined'</span> を型 <span class="hljs-string">'string'</span> に割り当てることはできません。型 <span class="hljs-string">'undefined'</span> を型 <span class="hljs-string">'string'</span> に割り当てることはできません。</code></pre><h2 id="h4e79de37a7"><br>5. microCMSから記事データを取得する（一覧画面）</h2><h3 id="hde4a1d43ba">型の事前準備</h3><p>microCMSから取得するブログ記事とタグのデータ型を定義しておきます。<br><br>型定義ファイルを別途作成します。</p><pre><code class="hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">mkdir</span> src/types</span>
<span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">touch</span> ./src/types/blog.ts</span></code></pre><p><br>作成したファイルに型を定義します。<br>今回私が作成したAPIだと以下の通りになります。</p><pre><code class="hljs">// src/types/blog.ts

export type Blog = {
  <span class="hljs-attribute">id</span>: string;
  <span class="hljs-attribute">body</span>: string;
  <span class="hljs-attribute">title</span>: string;
  <span class="hljs-attribute">tags</span>: Tag[];
  <span class="hljs-attribute">image</span>: string;
  <span class="hljs-attribute">createdAt</span>: string;
  <span class="hljs-attribute">updatedAt</span>: string;
  <span class="hljs-attribute">publishedAt</span>: string;
  <span class="hljs-attribute">revisedAt</span>: string;
};

export type Tag = {
  <span class="hljs-attribute">id</span>: string;
  <span class="hljs-attribute">tag</span>: string;
  <span class="hljs-attribute">createdAt</span>: string;
  <span class="hljs-attribute">updatedAt</span>: string;
  <span class="hljs-attribute">publishedAt</span>: string;
  <span class="hljs-attribute">revisedAt</span>: string;
};</code></pre><h3 id="hbc42ef09fb"><br>APIリクエストを行う</h3><p><code>getStaticProps</code>を使ってmicroCMSのAPIを叩き、データを取得します。<br><code>pages/index.tsx</code>&nbsp;に以下のように書きます。</p><pre><code class="hljs"><span class="hljs-comment">// pages/index.js</span>


<span class="hljs-keyword">import</span> <span class="hljs-title class_">Link</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/link"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">InferGetStaticPropsType</span>, <span class="hljs-title class_">NextPage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next"</span>;
<span class="hljs-keyword">import</span> { client } <span class="hljs-keyword">from</span> <span class="hljs-string">"libs/client"</span>;    <span class="hljs-comment">// srcから見た絶対パスで指定</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Blog</span>, <span class="hljs-title class_">Tag</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"types/blog"</span>;    <span class="hljs-comment">// srcから見た絶対パスで指定</span>

<span class="hljs-comment">// microCMSへAPIリクエスト</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getStaticProps</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> blog = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">get</span>({ <span class="hljs-attr">endpoint</span>: <span class="hljs-string">"blog"</span> });
  <span class="hljs-keyword">const</span> tag = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">get</span>({ <span class="hljs-attr">endpoint</span>: <span class="hljs-string">"tag"</span> });

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">blogs</span>: blog.<span class="hljs-property">contents</span>,
      <span class="hljs-attr">tags</span>: tag.<span class="hljs-property">contents</span>,
    },
  };
};

<span class="hljs-comment">// Props（blogsとtags）の型</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Props</span> = {
  <span class="hljs-attr">blogs</span>: <span class="hljs-title class_">Blog</span>[];
  <span class="hljs-attr">tags</span>: <span class="hljs-title class_">Tag</span>[];
};

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span>: <span class="hljs-title class_">NextPage</span>&lt;<span class="hljs-title class_">InferGetStaticPropsType</span>&lt;<span class="hljs-keyword">typeof</span> getStaticProps&gt;&gt; = <span class="hljs-function">(<span class="hljs-params">{
  blogs,
  tags,
}: Props</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(blogs);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(tags);
　<span class="hljs-comment">// ... 以下省略</span></code></pre><p><br>ここで&nbsp;<code>http://localhost:3000</code>&nbsp;にアクセスすると、コンソールにAPIから取得したデータが表示されるはずです。<br><br>私の作成したAPIだと、以下の画像のようなデータが取れています。</p><h3 id="hf4a22cee96">blogs</h3><p><img src="https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/21ce7cb8666749859e4e9a8a1a57939a/blogs.jpg" alt=""><br></p><h3 id="h0502f3a90c">tags</h3><p><img src="https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/3634ac49f1c749069024d8d2e57474f1/tags.jpg" alt=""><br><br>ではこのデータを画面に表示します。<br><br>※ディレクトリ構成は以下のようにします。</p><ul><li>pages/index.js&nbsp;→ 記事一覧画面</li><li>pages/blog/[id].ts → 記事詳細画面</li></ul><p><br>一覧画面に記事タイトルをリスト形式で表示し、記事詳細画面へのリンクをつけます。</p><pre><code class="hljs"><span class="hljs-comment">// pages/index.tsx</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span>: <span class="hljs-title class_">NextPage</span>&lt;<span class="hljs-title class_">InferGetStaticPropsType</span>&lt;<span class="hljs-keyword">typeof</span> getStaticProps&gt;&gt; = <span class="hljs-function">(<span class="hljs-params">{
  blogs,
  tags,
}: Props</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {blogs.map((blog) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{blog.id}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{</span>`/<span class="hljs-attr">blog</span>/${<span class="hljs-attr">blog.id</span>}`}&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>{blog.title}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}</code></pre><p><br>これで&nbsp;<code>http://localhost:3000</code>&nbsp;にアクセスすると記事タイトル一覧が表示され、タイトルをクリックすると&nbsp;<code>http://localhost:3000/blog/[microCMSで設定したコンテンツID]</code>&nbsp;のURLへ遷移するはずです。<br><br>次にこの遷移先のページを作ります。<br></p><h2 id="h85b588f038">6. 記事詳細画面を作成する</h2><p>一覧画面でブログ記事の詳細画面を作っていきます。<br><br>上記のリンク先に指定した通り、&nbsp;<code>pages/blog/[id].ts</code>に詳細画面を作ります。<br>まずはファイルを作成します。</p><pre><code class="hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">mkdir</span> src/pages/blog</span>
<span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">touch</span> ./src/pages/blog/[<span class="hljs-built_in">id</span>].tsx</span></code></pre><p><br>作成したファイルを、以下のように編集します。</p><pre><code class="hljs"><span class="hljs-comment">// pages/blog/[id].tsx</span>

<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">GetStaticPaths</span>,
  <span class="hljs-title class_">GetStaticProps</span>,
  <span class="hljs-title class_">InferGetStaticPropsType</span>,
  <span class="hljs-title class_">NextPage</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"next"</span>;
<span class="hljs-keyword">import</span> { client } <span class="hljs-keyword">from</span> <span class="hljs-string">"libs/client"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Blog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"types/blog"</span>;

<span class="hljs-comment">// APIリクエストを行うパスを指定</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getStaticPaths</span>: <span class="hljs-title class_">GetStaticPaths</span>&lt;<span class="hljs-title class_">Params</span>&gt; = <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">get</span>({ <span class="hljs-attr">endpoint</span>: <span class="hljs-string">"blog"</span> });

  <span class="hljs-keyword">const</span> paths = data.<span class="hljs-property">contents</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">content</span>) =&gt;</span> <span class="hljs-string">`/blog/<span class="hljs-subst">${content.id}</span>`</span>);
  <span class="hljs-keyword">return</span> { paths, <span class="hljs-attr">fallback</span>: <span class="hljs-literal">false</span> };
};

<span class="hljs-comment">// microCMSへAPIリクエスト</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getStaticProps</span>: <span class="hljs-title class_">GetStaticProps</span>&lt;<span class="hljs-title class_">Props</span>, <span class="hljs-title class_">Params</span>&gt; = <span class="hljs-keyword">async</span> (
  <span class="hljs-keyword">const</span> id = context.<span class="hljs-property">params</span>?.<span class="hljs-property">id</span>;
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">get</span>({ <span class="hljs-attr">endpoint</span>: <span class="hljs-string">"blog"</span>, <span class="hljs-attr">contentId</span>: id });

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">blog</span>: data,
    },
  };
};

<span class="hljs-comment">// // Props（blog）の型</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Props</span> = {
  <span class="hljs-attr">blog</span>: <span class="hljs-title class_">Blog</span>;
};

<span class="hljs-keyword">const</span> <span class="hljs-title class_">BlogId</span>: <span class="hljs-title class_">NextPage</span>&lt;<span class="hljs-title class_">InferGetStaticPropsType</span>&lt;<span class="hljs-keyword">typeof</span> getStaticProps&gt;&gt; = <span class="hljs-function">(<span class="hljs-params">{
  blog,
}: Props</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{blog.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{blog.publishedAt}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            {blog.tags.map((tag) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{tag.id}</span>&gt;</span>
          #{tag.tag}
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      ))}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">__html:</span> `${<span class="hljs-attr">blog.body</span>}`,
        }}
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span>
  );
}</code></pre><h3 id="h8a50fc5ec1"><br>ポイント解説</h3><ul><li><code>fallback: false</code>&nbsp;の設定</li></ul><p><code>getStaticPaths</code>&nbsp;で&nbsp;<code>return { fallback: false };</code>&nbsp;と書いています。<br><br>これにより、&nbsp;<code>http://localhost:3000/blog/[存在しないコンテンツID]</code>&nbsp;のURLにアクセスすると404ページへ遷移するようになります。<br>※&nbsp;<code>fallback: true</code>&nbsp;にして存在しないURLにアクセスした場合はエラー画面が出てしまいます。<br></p><ul><li><code>dangerouslySetInnerHTML</code></li></ul><p>以下の通り、記事本文は&nbsp;<code>dangerouslySetInnerHTML</code>&nbsp;を通して表示しています。<br></p><pre><code class="hljs"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
  <span class="hljs-attr">dangerouslySetInnerHTML</span>=</span></span><span class="hljs-template-variable">{{
    <span class="hljs-name">__html:</span> `${blog.body}`,
  }}</span><span class="language-xml"><span class="hljs-tag">
/&gt;</span></span></code></pre><p><br>APIから返される記事本文は文字列形式（HTMLタグも文字列として取得される）なので、これをHTMLとして描画するために<code>dangerouslySetInnerHTML</code>&nbsp;を使っています。<br></p><h2 id="h7941af99cd">7. コードブロックのハイライトを行う</h2><p>microCMSのリッチエディタでソースコードとして記述した部分は、</p><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>
    // コード
  <span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span></code></pre><p>という形式で取得されます。<br><br>このままdangerouslySetInnerHTMLを通すだけでは、何もハイライトされていないコードが表示されるので、ライブラリを使って装飾していきます。<br><br>microCMSの公式で紹介されている、<a style="color:#4aac00" href="https://www.npmjs.com/package/cheerio" target="_blank" rel="noopener noreferrer">cheerio</a>と<a style="color:#4aac00" href="https://www.npmjs.com/package/highlight.js" target="_blank" rel="noopener noreferrer">highlight.js</a>というライブラリを使ってサーバーサイドでハイライトを行いました。<br><a href="https://blog.microcms.io/syntax-highlighting-on-server-side/" target="_blank" rel="noopener noreferrer">サーバサイドでシンタックスハイライトを行う</a><br><br>まずはライブラリをインストールします。</p><pre><code class="hljs"><span class="hljs-variable">$ </span>yarn add highlight.js cheerio
<span class="hljs-variable">$ </span>yarn add --dev <span class="hljs-variable">@types</span>/highlightjs <span class="hljs-variable">@types</span>/cheerio</code></pre><p><br>次にブログ記事を生成する際の&nbsp;<code>getStaticProps</code>&nbsp;内の記述を修正します。<br>※ライブラリについての説明は上記のmicroCMSの記事などを参照ください。</p><pre><code class="hljs"><span class="hljs-comment">// pages/blog/[id].tsx</span>

<span class="hljs-comment">// importを追記</span>
<span class="hljs-keyword">import</span> cheerio <span class="hljs-keyword">from</span> <span class="hljs-string">"cheerio"</span>;
<span class="hljs-keyword">import</span> hljs <span class="hljs-keyword">from</span> <span class="hljs-string">"highlight.js"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"highlight.js/styles/hybrid.css"</span>;

<span class="hljs-comment">// 中略</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getStaticProps</span>: <span class="hljs-title class_">GetStaticProps</span>&lt;<span class="hljs-title class_">Props</span>, <span class="hljs-title class_">Params</span>&gt; = <span class="hljs-keyword">async</span> (
  context
) =&gt; {
  <span class="hljs-keyword">const</span> id = context.<span class="hljs-property">params</span>?.<span class="hljs-property">id</span>;
  <span class="hljs-keyword">const</span> blog = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">get</span>({ <span class="hljs-attr">endpoint</span>: <span class="hljs-string">"blog"</span>, <span class="hljs-attr">contentId</span>: id });
  <span class="hljs-comment">// 以下の部分を追記</span>
  <span class="hljs-keyword">const</span> $ = cheerio.<span class="hljs-title function_">load</span>(blog.<span class="hljs-property">body</span>);
  $(<span class="hljs-string">"pre code"</span>).<span class="hljs-title function_">each</span>(<span class="hljs-function">(<span class="hljs-params">_, elm</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> result = hljs.<span class="hljs-title function_">highlightAuto</span>($(elm).<span class="hljs-title function_">text</span>());
    $(elm).<span class="hljs-title function_">html</span>(result.<span class="hljs-property">value</span>);
    $(elm).<span class="hljs-title function_">addClass</span>(<span class="hljs-string">"hljs"</span>);
  });

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: {
      blog,
      <span class="hljs-attr">highlightedBody</span>: $.<span class="hljs-title function_">html</span>(),
    },
  };
};</code></pre><p>これでサーバーサード側でシンタックスハイライト済の記事データを取得することができます。<br><br>※実装においては以下の記事も参考にさせていただきました。<br><a href="https://www.blogchin.net/blogs/p9f3s1x5k5yb/" target="_blank" rel="noopener noreferrer">Next.JS+microCMSで作成したブログに、ソースコードのシンタックスハイライトをつけてみる</a><br><a href="https://qiita.com/cawauchi/items/ff6489b17800c5676908" target="_blank" rel="noopener noreferrer">next.js+microcmsでシンタックスハイライトの導入 - Qiita</a></p><h2 id="h5a51a8e35e"><br>8. 【おまけ】タグでの絞り込み機能</h2><p>先述の通り、今回は&nbsp;<code>blog</code>&nbsp;と&nbsp;<code>tag</code>&nbsp;の2つのAPIを作成し、ブログ記事は複数の&nbsp;<code>tag</code>&nbsp;を持てるようにしました。<br><br>そして</p><ul><li>記事一覧画面で各記事が持つタグを表示</li><li>APIから取得した&nbsp;<code>tag</code>&nbsp;の一覧をサイドバーに表示（タグを選んで記事を絞り込む）</li></ul><p>を出来るようにしました。<br><br><img src="https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/0ef6284906254e6580e558fae4082554/tag_serch.jpg" alt=""><br></p><h3 id="h3ab24f6f50">メリット</h3><p><code>tag</code>&nbsp;のAPIエンドポイントを別途作成する構成にしたことで、以下のようなメリットがあります。</p><ul><li>サイドバーに設置した&nbsp;<code>tag</code>&nbsp;一覧の表示順の並べ替えや修正を、コードをいじらずmicroCMSの管理画面で行える。</li><li><code>tag</code>&nbsp;名を修正したい時に、記事のタグを一つひとつ修正しなくともAPIの&nbsp;<code>tag</code>&nbsp;を修正すれば一括して変更できる。</li></ul><h3 id="h50d6571ee1"><br>実装方法（記事一覧の表示について）</h3><p>まずは、&nbsp;<code>getStaticProps</code>&nbsp;から受け取った記事をそのまま全て表示するのではなく、画面に表示する記事だけを格納する&nbsp;<code>state</code>&nbsp;を別途作成します。</p><pre><code class="hljs">const <span class="hljs-literal">[<span class="hljs-identifier">showBlogs</span>, <span class="hljs-identifier">setShowBlogs</span>]</span> = use<span class="hljs-constructor">State(<span class="hljs-params">blogs</span>)</span>
<span class="hljs-comment">// 初期値にgetStaticPropsから受け取ったブログ記事データを入れる</span></code></pre><p><br>そして画面には&nbsp;<code>showBlogs</code>&nbsp;の中身を&nbsp;<code>map</code>&nbsp;で回して一覧表示します。<br>※絞り込みによって&nbsp;<code>showBlogs</code>&nbsp;に記事が入っていなかった場合のための条件付きレンダリングも記述しておきます。</p><pre><code class="hljs">{!showBlogs.<span class="hljs-built_in">length</span> &amp;&amp; &lt;p&gt;There are no posts...&lt;/p&gt;}
{showBlogs.<span class="hljs-built_in">map</span>(<span class="hljs-function">(<span class="hljs-params">blog</span>) =&gt;</span> (
    <span class="hljs-comment">// 記事を表示</span></code></pre><p><br><br><strong>※注</strong><br><strong>このブログサイトはMaterialUIを使ってスタイリングを行っており、ここからは実際の実装通り、通常のHTMLタグではなくMaterialUIのタグで表記させていただきます。</strong><br><strong>（MaterialUIのタグ名を見ればどんな役割の要素なのか想像がつくと思うので、MaterialUIに触れたことが無い方も何となく読み取っていただけるかなと思います。）</strong><br><br><br>記事の一覧表示の中で、この記事が持つ&nbsp;<code>tag</code>&nbsp;も&nbsp;<code>map</code>&nbsp;で回して表示します。</p><pre><code class="hljs">{showBlogs.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">blog</span>) =&gt;</span> (

    <span class="hljs-comment">// 中略</span>

    <span class="hljs-comment">// 持っているtagを全て表示</span>
    {blog.<span class="hljs-property">tags</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">tag</span>) =&gt;</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Typography</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{tag.id}</span>&gt;</span>
        #{tag.tag}
      <span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span></span>
    ))}</code></pre><h3 id="h79fb2c15aa"><br>実装方法（タグによる絞り込みについて）</h3><p><code>tag</code>&nbsp;のAPIエンドポイントから受け取るデータは、以下の<code>tag</code>型の配列でした。</p><pre><code class="hljs">export <span class="hljs-keyword">type</span> <span class="hljs-keyword">Tag</span> <span class="hljs-title">= {
  id</span>: <span class="hljs-keyword">string</span>;
  <span class="hljs-keyword">tag</span>: <span class="hljs-keyword">string</span>;
  createdAt: <span class="hljs-keyword">string</span>;
  updatedAt: <span class="hljs-keyword">string</span>;
  publishedAt: <span class="hljs-keyword">string</span>;
  revisedAt: <span class="hljs-keyword">string</span>;
};</code></pre><p><br>なのでまずはこのデータから、tag名だけを抜き出して配列に格納します。</p><pre><code class="hljs">// getStaticPropsで取得したtagsから<span class="hljs-keyword">tag</span>名のみ抜き出す
<span class="hljs-keyword">const</span> <span class="hljs-keyword">tag</span>List = tags.map((<span class="hljs-keyword">tag</span>) =&gt; <span class="hljs-keyword">tag</span>.<span class="hljs-keyword">tag</span>);</code></pre><p><br>作成した&nbsp;<code>tagList</code>&nbsp;を使って、サイドバーにタグ一覧を表示します。</p><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">List</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span>&gt;</span>
    # Tags
  <span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">ListItemButton</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> selectTag("all")}&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">ListItemText</span> <span class="hljs-attr">primary</span>=<span class="hljs-string">"All"</span>/&gt;</span>   // primaryに指定した文字列が表示される
  <span class="hljs-tag">&lt;/<span class="hljs-name">ListItemButton</span>&gt;</span>

  {tagList.map((tag) =&gt; (
    <span class="hljs-tag">&lt;<span class="hljs-name">ListItemButton</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{tag}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> selectTag(tag)}&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">ListItemText</span> <span class="hljs-attr">primary</span>=<span class="hljs-string">{tag}/</span>&gt;</span>   // primaryに指定した文字列が表示される
    <span class="hljs-tag">&lt;/<span class="hljs-name">ListItemButton</span>&gt;</span>
  ))}
<span class="hljs-tag">&lt;/<span class="hljs-name">List</span>&gt;</span></code></pre><p><br><code>onClick</code>&nbsp;に指定した&nbsp;<code>selectTag()</code>&nbsp;メソッドを実装します。</p><pre><code class="hljs"><span class="hljs-comment">// タグ絞り込み</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">selectTag</span> = (<span class="hljs-params">tag: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (tag === <span class="hljs-string">"all"</span>) {
    <span class="hljs-title function_">setShowBlogs</span>(blogs);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">const</span> selectedBlogs = blogs.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">blog</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> haveTags = blog.<span class="hljs-property">tags</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">tag</span>) =&gt;</span> tag.<span class="hljs-property">tag</span>);
      <span class="hljs-keyword">return</span> haveTags.<span class="hljs-title function_">includes</span>(tag);
    });
    <span class="hljs-title function_">setShowBlogs</span>(selectedBlogs);
  }

  <span class="hljs-comment">// 画面最上部へスクロールさせる</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">behavior</span>: <span class="hljs-string">"smooth"</span>,
  });
};</code></pre><p><br>検索のロジックについては以前別の記事に書いたので、詳しくはこちらをご覧ください。<br><a style="color:#4aac00" href="https://qiita.com/hinako_n/items/a0745afe0631578c698e" target="_blank" rel="noopener noreferrer">Reactでリアルタイムの検索機能を実装する - Qiita</a><br><br>以上で「All」を選べば全記事が表示され、タグを選べばそのタグを持つ記事のみが表示されるようになりました。<br></p><h2 id="h88cdec125d"> 9.【おまけ】ページネーション機能の実装</h2><p><code>react-paginate</code>というライブラリを使って、ページネーション機能を実装しました。  <br>ライブラリ： <a href="https://www.npmjs.com/package/react-paginate " target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/react-paginate </a><br><br><img src="https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/9a2cb163f00a4910b6ebf063d87811ab/%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%8D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3.jpg" alt=""><br><br>ライブラリについての詳しい説明では割愛し、ここでは実装したコードだけ載せさせていただきます。<br>使い方は以下の記事を参考にさせていただきました。<br><br><a href="https://de-milestones.com/react_pagination/" target="_blank" rel="noopener noreferrer">https://de-milestones.com/react_pagination/</a><br><br><a href="https://tech.stmn.co.jp/entry/2020/10/28/141406" target="_blank" rel="noopener noreferrer">https://tech.stmn.co.jp/entry/2020/10/28/141406</a><br></p><h3 id="h2661198b93">実装手順</h3><p>まずはライブラリをインストールします。<br></p><pre><code class="hljs">$ yarn <span class="hljs-built_in">add</span> react-paginate</code></pre><p><br>記事一覧画面を編集していきます。<br><br>ページネーションの制御に使う <code>state</code>と、ページネーションをクリックした時に実行するメソッドを定義します。  <br><br>pages/index.tsx</p><pre><code class="hljs"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactPaginate</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react-paginate"</span>;


<span class="hljs-comment">// 中略</span>

&nbsp;<span class="hljs-keyword">const</span> [offset, setOffset] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);&nbsp;&nbsp;<span class="hljs-comment">// 何番目の記事から表示するか</span>
&nbsp;<span class="hljs-keyword">const</span> perPage = <span class="hljs-number">6</span>;&nbsp;&nbsp;<span class="hljs-comment">// 1ページあたりに表示する記事数</span>

&nbsp;<span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePageChange</span> = (<span class="hljs-params">data: { selected: <span class="hljs-built_in">number</span> }</span>) =&gt; {
&nbsp;&nbsp;<span class="hljs-comment">// クリックしたページ数を{selected: 1}のようなオブジェクト形式で引数に受ける</span>
&nbsp;&nbsp;<span class="hljs-title function_">setOffset</span>(data.<span class="hljs-property">selected</span> * perPage)&nbsp;&nbsp;<span class="hljs-comment">// 表示する記事の開始位置を変更</span>

&nbsp;&nbsp;<span class="hljs-comment">// ページ最上部へスクロールする</span>
&nbsp;&nbsp;<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;<span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
&nbsp;&nbsp;&nbsp;<span class="hljs-attr">behavior</span>: <span class="hljs-string">"smooth"</span>,
&nbsp;&nbsp;});
&nbsp;};</code></pre><p><br>記事の一覧表示の箇所を修正します。</p><pre><code class="hljs"><span class="hljs-comment">// 表示する記事をsliceで抽出して一覧表示</span>
{showBlogs.<span class="hljs-built_in">slice</span>(<span class="hljs-built_in">offset</span>, <span class="hljs-built_in">offset</span> + perPage).<span class="hljs-built_in">map</span>(<span class="hljs-function">(<span class="hljs-params">blog</span>) =&gt;</span> (</code></pre><p><br><br>ページネーションコンポーネントを記事一覧の下に設置します。</p><pre><code class="hljs"><span class="hljs-comment">// ページネーションコンポーネント</span>
&lt;ReactPaginate
&nbsp;&nbsp;previousLabel={<span class="hljs-string">"&lt;"</span>}&nbsp;<span class="hljs-comment">// 前のページボタン</span>
&nbsp;&nbsp;nextLabel={<span class="hljs-string">"&gt;"</span>}&nbsp;&nbsp;<span class="hljs-comment">// 次のページボタン</span>
&nbsp;&nbsp;pageCount={Math.<span class="hljs-built_in">ceil</span>(blogs.<span class="hljs-built_in">length</span> / perPage)}&nbsp;&nbsp;<span class="hljs-comment">// ページ総数</span>
&nbsp;&nbsp;onPageChange={handlePageChange}&nbsp;&nbsp;<span class="hljs-comment">// クリック時のfunction</span>
&nbsp;&nbsp;containerClassName={<span class="hljs-string">"pagination"</span>}&nbsp;&nbsp;<span class="hljs-comment">// ページネーションであるulに付くクラス名</span>
&nbsp;&nbsp;activeClassName={<span class="hljs-string">"active"</span>}&nbsp;&nbsp;<span class="hljs-comment">// アクティブなページのliに着くクラス名</span>
/&gt;</code></pre><p><br>スタイルを付けます。</p><pre><code class="hljs"><span class="hljs-selector-class">.pagination</span> {
&nbsp;<span class="hljs-attribute">display</span>: flex;
&nbsp;<span class="hljs-attribute">align-items</span>: center;
&nbsp;<span class="hljs-attribute">justify-content</span>: center;
&nbsp;<span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
&nbsp;<span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span> <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.pagination</span> <span class="hljs-selector-tag">li</span> {
&nbsp;<span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">16px</span>;
}

<span class="hljs-selector-class">.pagination</span> <span class="hljs-selector-tag">li</span> &gt; <span class="hljs-selector-tag">a</span> {
&nbsp;<span class="hljs-attribute">position</span>: relative;
&nbsp;<span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
&nbsp;<span class="hljs-attribute">width</span>: <span class="hljs-number">24px</span>;
&nbsp;<span class="hljs-attribute">height</span>: <span class="hljs-number">24px</span>;
&nbsp;<span class="hljs-attribute">outline</span>: none;
&nbsp;<span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
&nbsp;<span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-class">.pagination</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">::before</span> {
&nbsp;<span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
&nbsp;<span class="hljs-attribute">display</span>: block;
&nbsp;<span class="hljs-attribute">position</span>: absolute;
&nbsp;<span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
&nbsp;<span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
&nbsp;<span class="hljs-attribute">width</span>: <span class="hljs-number">32px</span>;
&nbsp;<span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;
&nbsp;<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
&nbsp;<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
&nbsp;<span class="hljs-attribute">z-index</span>: -<span class="hljs-number">100</span>;
}

<span class="hljs-selector-class">.pagination</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-class">.active</span> &gt; <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">::before</span> {
&nbsp;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#929191</span>;
}

<span class="hljs-selector-class">.pagination</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-class">.active</span> &gt; <span class="hljs-selector-tag">a</span> {
&nbsp;<span class="hljs-attribute">color</span>: <span class="hljs-number">#f2f2f2</span>;
}</code></pre><p><br>以上でページネーションを実装できました。<br><br>予めフロント側で全件保持している記事データに対して表示を変えているだけなので、もちろんリロードもなく瞬時に切り替わります。<br></p><h2 id="h9b4c4b9dd7"> 最後に</h2><p>microCMSは公式のチュートリアルやブログが豊富で分かりやすく、機能もどんどん拡張されており（最初は公式SDKも無かったらしい）、長く使っていくにも安心だなと思いました。<br><br>このブログは最低限の機能を作ってデプロイしたのでまだまだ未完成ですが、これから機能拡大・スタイル修正していきたいなと思います。<br></p><h2 id="h3bcda3e6b0">最後に</h2><p>microCMSは公式のチュートリアルやブログが豊富で分かりやすく、機能もどんどん拡張されており（最初は公式SDKも無かったらしい）、長く使っていくにも安心だなと思いました。<br><br>このブログは最低限の機能を作ってデプロイしたのでまだまだ未完成ですが、これから機能拡大・スタイル修正していきたいなと思います。<br></p><h2 id="he45680f0bc">参考記事</h2><p><a href="https://zenn.dev/elletech/articles/nextjs_microcms" target="_blank" rel="noopener noreferrer">Next.js(TypeScript)、TailwindCSS、microCMSでブログを作成しよう！</a><br><a href="https://blog.microcms.io/microcms-next-jamstack-blog/" target="_blank" rel="noopener noreferrer">microCMS + Next.jsでJamstackブログを作ってみよう</a><br><a href="https://fwywd.com/tech/next-eslint-prettier" target="_blank" rel="noopener noreferrer">Next.js (TypeScript) に ESLint と Prettier を導入し、コードを綺麗に保とう | fwywd（フュード）...</a><br></p></body></html></div></div></div><style data-emotion="css 2sbw87">.css-2sbw87{background-color:#494949;margin:0 auto;padding-top:30px;padding-bottom:30px;color:#f2f2f2;letter-spacing:0.08rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-around;-ms-flex-pack:space-around;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}</style><div class="css-2sbw87"><style data-emotion="css rfnosa">.css-rfnosa{box-sizing:border-box;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}</style><div class="MuiGrid-root MuiGrid-grid-xs-10 MuiGrid-grid-md-8 css-rfnosa"><style data-emotion="css 1lx0lai">.css-1lx0lai{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;text-align:center;}</style><div class="MuiGrid-root MuiGrid-item css-1lx0lai"><a href="https://twitter.com/napi_nami"><style data-emotion="css 1ea777n">.css-1ea777n{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;margin:8px;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1ea777n" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TwitterIcon"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg></a><a href="https://github.com/hinakonagao"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1ea777n" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="GitHubIcon"><path d="M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"></path></svg></a></div><style data-emotion="css 198jr53">.css-198jr53{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;text-align:center;font-weight:200;}</style><p class="MuiTypography-root MuiTypography-body2 css-198jr53">© 2022 hinako blog</p></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"blog":{"id":"microcms-nextjs-blog","createdAt":"2022-02-17T12:46:35.174Z","updatedAt":"2022-03-02T23:51:43.327Z","publishedAt":"2022-02-26T23:51:43.000Z","revisedAt":"2022-03-02T23:51:43.327Z","title":"microCMS × Next.js（TypeScript）で個人ブログを作る","body":"\u003ch2 id=\"h9707d3a59a\"\u003e概要\u003c/h2\u003e\u003cp\u003e\u003ccode\u003emicroCMS\u003c/code\u003e、\u003ccode\u003eNext.js（TypeScript）\u003c/code\u003eを使ってブログサイトを作成した手順と、追加で実装した機能について、またその過程で学んだことの備忘録記事です。\u003cbr\u003e\u003cbr\u003e基本的には公式のチュートリアル通りに進めていますが、TypeScriptの型付けや記事内のコードブロックのハイライトなど詰まった箇所もあったので、まとめておきたいと思います。\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eデプロイURL\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003ca href=\"https://microcms-blog-hinakonagao.vercel.app/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://microcms-blog-hinakonagao.vercel.app\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eGitHub\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003ca href=\"https://github.com/hinakonagao/microcms_blog\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://github.com/hinakonagao/microcms_blog\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e※この記事ではページのスタイリングは解説しません。\u003cbr\u003eMaterialUIを主に使用してスタイリングを行っているので、詳しいコードはGitHubをご覧いただければと思います。\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h48162eced8\"\u003e使用技術\u003c/h3\u003e\u003cul\u003e\u003cli\u003eNext.js　12.0.10\u003c/li\u003e\u003cli\u003eReact　17.0.2\u003c/li\u003e\u003cli\u003eTypeScript　4.5.5\u003c/li\u003e\u003cli\u003eESLint　8.8.0\u003c/li\u003e\u003cli\u003eprettier　2.5.1\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hc953739b3f\"\u003e全体の流れ\u003c/h2\u003e\u003cp\u003e１．microCMSの準備（アカウント作成・記事コンテンツのAPI作成）\u003cbr\u003e２．Next.jsのプロジェクト作成\u003cbr\u003e３．APIリクエストのための環境変数の設定\u003cbr\u003e４．公式のSDK「microcms-js-sdk」の導入\u003cbr\u003e５．記事一覧画面の作成\u003cbr\u003e６．記事詳細画面の作成\u003cbr\u003e７．コードブロックのシンタックスハイライトの実装\u003cbr\u003e８．【おまけ】タグでの絞り込み機能の実装\u003cbr\u003e９．【おまけ】ページネーション機能の実装\u003cbr\u003e\u003cbr\u003eというような流れで説明していきます。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hd1205c1797\"\u003e1. microCMSの準備\u003c/h2\u003e\u003cp\u003eまずはmicroCMSのアカウントを作成し、APIを作成します。\u003cbr\u003e\u003cbr\u003e手順は公式のチュートリアルに詳しく書かれているので、ここでの説明は割愛します。\u003cbr\u003e\u003ca style=\"color:#4aac00\" href=\"https://blog.microcms.io/microcms-next-jamstack-blog/#:%7E:text=%E3%81%8C%E7%AB%8B%E3%81%A1%E4%B8%8A%E3%81%8C%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82-,2.%20microCMS%E3%81%AE%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B,-%E6%AC%A1%E3%81%AB%E3%80%81microCMS%E3%81%A7\" target=\"_blank\" rel=\"noopener noreferrer\"\u003emicroCMS + Next.jsでJamstackブログを作ってみよう　2. microCMSの用意する\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e私は\u0026nbsp;\u003ccode\u003eblog\u003c/code\u003e\u0026nbsp;と\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;の2つのAPIエンドポイントを作成しました。\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"hebabef9705\"\u003eblog\u003c/h3\u003e\u003cp\u003eブログコンテンツを登録しておくリスト形式の API です。\u003c/p\u003e\u003cul\u003e\u003cli\u003etitle：記事タイトル\u003c/li\u003e\u003cli\u003ebody：記事本文\u003c/li\u003e\u003cli\u003etags：タグ（別のエンドポイント\u0026nbsp;\u003ccode\u003e/tag\u003c/code\u003e\u0026nbsp;に登録したタグを複数参照できるように設定）\u003c/li\u003e\u003cli\u003eimage：表示する画像名（プロジェクトディレクトリに保存した画像の中から、ブラウザに表示する画像を指定するために使用）\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/577556386f954864b763ec82bdea4d3c/blog.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h1d9b92c0c9\"\u003etag\u003c/h3\u003e\u003cp\u003eブログ記事に紐づけるタグを登録しておくリスト形式の API です。\u003cbr\u003e\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/24cd3d349eb74b35a9ee5ca8f901543a/tag.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hce660a84c7\"\u003e2. Next.jsプロジェクトを作成する\u003c/h2\u003e\u003cp\u003e下記のコマンドを実行してNext.jsのプロジェクトを作成し、続けて開発サーバーを立ち上げます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ yarn create next-app --typescript\n// プロジェクト名の入力を求められるので入力する\n\n$ cd ./microcms_blog/\n\n$ yarn dev\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e次に\u003ccode\u003esrc\u003c/code\u003eディレクトリを作成して、\u003ccode\u003epages\u003c/code\u003eディレクトリと\u003ccode\u003estyles\u003c/code\u003eディレクトリを\u003ccode\u003esrc\u003c/code\u003eディレクトリの配下に移動させます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ mkdir src \u0026amp;\u0026amp; mv pages src \u0026amp;\u0026amp; mv styles src\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eさらに、モジュールのインポートを絶対パスで指定できるよう、ベースURLを\u0026nbsp;\u003ccode\u003esrc\u003c/code\u003e\u0026nbsp;ディレクトリに設定します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// tsconfig.json\n{\n  \"compilerOptions\": {\n    // 追加\n    \"baseUrl\": \"src\"\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eベースURLの設定についてはこちらの記事を参考にさせていただきました。\u003cbr\u003e\u003ca href=\"https://fwywd.com/tech/next-base-url\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e【Next.js】特定のディレクトリを基準にし、絶対パスでモジュールをインポートする方法 | fwywd（フュード）powered by キ...\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"ha56333b74a\"\u003eESLint / Prettier\u003c/h2\u003e\u003cp\u003eNext.js のバージョン11 からは、デフォルトでESLintが搭載されています。\u003cbr\u003eESLintに関するインストール済のパッケージは以下の2つです。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// package.json\n{\n  ...\n  \"devDependencies\": {\n    \"eslint\": \"8.8.0\",    // 構文解析のエンジン\n    \"eslint-config-next\": \"12.0.10\",    // ESLintのルール\n  }\n  ...\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eNext.js の新規プロジェクト作成時に生成された\u0026nbsp;\u003ccode\u003e.eslintrc\u003c/code\u003e\u0026nbsp;は ESLint の設定ファイルを意味しており、\u003cstrong\u003eデフォルトで\u0026nbsp;\u003c/strong\u003e\u003cstrong\u003e\u003ccode\u003eeslint-config-next\u003c/code\u003e\u003c/strong\u003e\u003cstrong\u003e\u0026nbsp;の設定が適用\u003c/strong\u003eされています。（ルールの詳細は後述）\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// .eslintrc.json\n\n{\n  \"extends\": \"next/core-web-vitals\",\n}\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e少しだけESLintの設定を加えます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// .eslintrc.json\n\n{\n  \"extends\": \"next/core-web-vitals\",\n  // 以下のルールを追記\n  \"rules\": {\n    \"react/display-name\": \"off\",\n    \"react-hooks/exhaustive-deps\": \"off\",\n    \"@next/next/no-sync-scripts\": \"off\"\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003ePrettier は含まれていないため、インストールしておきます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ yarn -DE add prettier eslint-config-prettier\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"h5095390624\"\u003e\u003cbr\u003e3. 環境変数の設定\u003c/h2\u003e\u003cp\u003emicroCMSのAPIへアクセスする際は、サービスドメインを指定し、リクエストにそのサービスドメインのAPIキーを含める事でデータを取得することができます。\u003cbr\u003e\u003cbr\u003e※microCMSでのAPIキーの作成方法は公式ページを参照ください。\u003cbr\u003e\u003ca style=\"color:#4aac00\" href=\"https://document.microcms.io/content-api/x-microcms-api-key\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eAPIキー（X-MICROCMS-API-KEY）\u003c/a\u003e\u003cbr\u003e\u003cbr\u003eまずは環境変数を管理するファイルを作成します。\u003cbr\u003e※\u0026nbsp;\u003ccode\u003e.local\u003c/code\u003eをつけるとローカル環境で使うことができ、\u0026nbsp;\u003ccode\u003e.development\u003c/code\u003eをつけると開発環境で使えます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ touch .env.development.local\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003e.env.development.local\u003c/code\u003eファイルを作成したら、\u003ccode\u003eサービスドメイン\u003c/code\u003eとmicroCMSの\u003ccode\u003eAPIキー\u003c/code\u003eを書き込みます。\u003cbr\u003e※サービスドメインは、例えば自分のmicroCMSページのURLが\u0026nbsp;\u003ccode\u003ehttps://aiueo.microcms.io/\u003c/code\u003e\u0026nbsp;であれば\u0026nbsp;\u003ccode\u003eaiueo\u003c/code\u003e\u0026nbsp;の部分になります。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eSERVICE_DOMAIN=xxxxxxxxxxx\nAPI_KEY=xxxxxxxxxxxx\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003eenv\u003c/code\u003e\u0026nbsp;ファイルに書いた値は、以下のようにしてプロジェクト内で参照することができます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eprocess.env.API_KEY\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"h84f24c70f8\"\u003e\u003cbr\u003e4.microcms-js-sdkの準備\u003c/h2\u003e\u003cp\u003eAPIリクエストには公式が提供している\u003ccode\u003emicrocms-js-sdk\u003c/code\u003eを使います。\u003cbr\u003e\u003cbr\u003eまずは\u003ccode\u003emicrocms-js-sdk\u003c/code\u003eをインストールします。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ yarn add microcms-js-sdk\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003elibs/client.ts\u003c/code\u003e\u0026nbsp;を作成してSDKの初期化を行います。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ mkdir src/libs\n$ touch ./src/libs/client.ts\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003eserviceDomain\u003c/code\u003e\u0026nbsp;と\u0026nbsp;\u003ccode\u003eapiKey\u003c/code\u003e\u0026nbsp;の値は\u0026nbsp;\u003ccode\u003eenv\u003c/code\u003e\u0026nbsp;ファイルを参照します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// libs/client.ts\n\nimport { createClient } from \"microcms-js-sdk\";\n\nexport const client = createClient({\n  serviceDomain: process.env.SERVICE_DOMAIN || \"\",\n  apiKey: process.env.API_KEY || \"\",\n});\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e※\u003ccode\u003eserviceDomain\u003c/code\u003e\u0026nbsp;と\u0026nbsp;\u003ccode\u003eapiKey\u003c/code\u003e\u0026nbsp;は\u0026nbsp;\u003ccode\u003estring\u003c/code\u003e型、.envファイルから参照する環境変数は\u0026nbsp;\u003ccode\u003estring | undefined\u003c/code\u003e型なので、もし以下のように\u0026nbsp;\u003ccode\u003e|| \"\"\u003c/code\u003e\u0026nbsp;の部分を書かないとエラーが出ます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eserviceDomain: process.env.SERVICE_DOMAIN\n// 型 'string | undefined' を型 'string' に割り当てることはできません。型 'undefined' を型 'string' に割り当てることはできません。\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"h4e79de37a7\"\u003e\u003cbr\u003e5. microCMSから記事データを取得する（一覧画面）\u003c/h2\u003e\u003ch3 id=\"hde4a1d43ba\"\u003e型の事前準備\u003c/h3\u003e\u003cp\u003emicroCMSから取得するブログ記事とタグのデータ型を定義しておきます。\u003cbr\u003e\u003cbr\u003e型定義ファイルを別途作成します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ mkdir src/types\n$ touch ./src/types/blog.ts\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e作成したファイルに型を定義します。\u003cbr\u003e今回私が作成したAPIだと以下の通りになります。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// src/types/blog.ts\n\nexport type Blog = {\n  id: string;\n  body: string;\n  title: string;\n  tags: Tag[];\n  image: string;\n  createdAt: string;\n  updatedAt: string;\n  publishedAt: string;\n  revisedAt: string;\n};\n\nexport type Tag = {\n  id: string;\n  tag: string;\n  createdAt: string;\n  updatedAt: string;\n  publishedAt: string;\n  revisedAt: string;\n};\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"hbc42ef09fb\"\u003e\u003cbr\u003eAPIリクエストを行う\u003c/h3\u003e\u003cp\u003e\u003ccode\u003egetStaticProps\u003c/code\u003eを使ってmicroCMSのAPIを叩き、データを取得します。\u003cbr\u003e\u003ccode\u003epages/index.tsx\u003c/code\u003e\u0026nbsp;に以下のように書きます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// pages/index.js\n\n\nimport Link from \"next/link\";\nimport type { InferGetStaticPropsType, NextPage } from \"next\";\nimport { client } from \"libs/client\";    // srcから見た絶対パスで指定\nimport type { Blog, Tag } from \"types/blog\";    // srcから見た絶対パスで指定\n\n// microCMSへAPIリクエスト\nexport const getStaticProps = async () =\u0026gt; {\n  const blog = await client.get({ endpoint: \"blog\" });\n  const tag = await client.get({ endpoint: \"tag\" });\n\n  return {\n    props: {\n      blogs: blog.contents,\n      tags: tag.contents,\n    },\n  };\n};\n\n// Props（blogsとtags）の型\ntype Props = {\n  blogs: Blog[];\n  tags: Tag[];\n};\n\nconst Home: NextPage\u0026lt;InferGetStaticPropsType\u0026lt;typeof getStaticProps\u0026gt;\u0026gt; = ({\n  blogs,\n  tags,\n}: Props) =\u0026gt; {\n  console.log(blogs);\n  console.log(tags);\n　// ... 以下省略\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eここで\u0026nbsp;\u003ccode\u003ehttp://localhost:3000\u003c/code\u003e\u0026nbsp;にアクセスすると、コンソールにAPIから取得したデータが表示されるはずです。\u003cbr\u003e\u003cbr\u003e私の作成したAPIだと、以下の画像のようなデータが取れています。\u003c/p\u003e\u003ch3 id=\"hf4a22cee96\"\u003eblogs\u003c/h3\u003e\u003cp\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/21ce7cb8666749859e4e9a8a1a57939a/blogs.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h0502f3a90c\"\u003etags\u003c/h3\u003e\u003cp\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/3634ac49f1c749069024d8d2e57474f1/tags.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003cbr\u003eではこのデータを画面に表示します。\u003cbr\u003e\u003cbr\u003e※ディレクトリ構成は以下のようにします。\u003c/p\u003e\u003cul\u003e\u003cli\u003epages/index.js\u0026nbsp;→ 記事一覧画面\u003c/li\u003e\u003cli\u003epages/blog/[id].ts → 記事詳細画面\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003e一覧画面に記事タイトルをリスト形式で表示し、記事詳細画面へのリンクをつけます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// pages/index.tsx\n\nconst Home: NextPage\u0026lt;InferGetStaticPropsType\u0026lt;typeof getStaticProps\u0026gt;\u0026gt; = ({\n  blogs,\n  tags,\n}: Props) =\u0026gt; {\n  return (\n    \u0026lt;div\u0026gt;\n      \u0026lt;ul\u0026gt;\n        {blogs.map((blog) =\u0026gt; (\n          \u0026lt;li key={blog.id}\u0026gt;\n            \u0026lt;Link href={`/blog/${blog.id}`}\u0026gt;\n              \u0026lt;a\u0026gt;{blog.title}\u0026lt;/a\u0026gt;\n            \u0026lt;/Link\u0026gt;\n          \u0026lt;/li\u0026gt;\n        ))}\n      \u0026lt;/ul\u0026gt;\n    \u0026lt;/div\u0026gt;\n  )\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eこれで\u0026nbsp;\u003ccode\u003ehttp://localhost:3000\u003c/code\u003e\u0026nbsp;にアクセスすると記事タイトル一覧が表示され、タイトルをクリックすると\u0026nbsp;\u003ccode\u003ehttp://localhost:3000/blog/[microCMSで設定したコンテンツID]\u003c/code\u003e\u0026nbsp;のURLへ遷移するはずです。\u003cbr\u003e\u003cbr\u003e次にこの遷移先のページを作ります。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h85b588f038\"\u003e6. 記事詳細画面を作成する\u003c/h2\u003e\u003cp\u003e一覧画面でブログ記事の詳細画面を作っていきます。\u003cbr\u003e\u003cbr\u003e上記のリンク先に指定した通り、\u0026nbsp;\u003ccode\u003epages/blog/[id].ts\u003c/code\u003eに詳細画面を作ります。\u003cbr\u003eまずはファイルを作成します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ mkdir src/pages/blog\n$ touch ./src/pages/blog/[id].tsx\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e作成したファイルを、以下のように編集します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// pages/blog/[id].tsx\n\nimport {\n  GetStaticPaths,\n  GetStaticProps,\n  InferGetStaticPropsType,\n  NextPage,\n} from \"next\";\nimport { client } from \"libs/client\";\nimport type { Blog } from \"types/blog\";\n\n// APIリクエストを行うパスを指定\nexport const getStaticPaths: GetStaticPaths\u0026lt;Params\u0026gt; = async () =\u0026gt; {\n  const data = await client.get({ endpoint: \"blog\" });\n\n  const paths = data.contents.map((content) =\u0026gt; `/blog/${content.id}`);\n  return { paths, fallback: false };\n};\n\n// microCMSへAPIリクエスト\nexport const getStaticProps: GetStaticProps\u0026lt;Props, Params\u0026gt; = async (\n  const id = context.params?.id;\n  const data = await client.get({ endpoint: \"blog\", contentId: id });\n\n  return {\n    props: {\n      blog: data,\n    },\n  };\n};\n\n// // Props（blog）の型\ntype Props = {\n  blog: Blog;\n};\n\nconst BlogId: NextPage\u0026lt;InferGetStaticPropsType\u0026lt;typeof getStaticProps\u0026gt;\u0026gt; = ({\n  blog,\n}: Props) =\u0026gt; {\n  return (\n    \u0026lt;main\u0026gt;\n      \u0026lt;h1\u0026gt;{blog.title}\u0026lt;/h1\u0026gt;\n      \u0026lt;p\u0026gt;{blog.publishedAt}\u0026lt;/p\u0026gt;\n            {blog.tags.map((tag) =\u0026gt; (\n        \u0026lt;li key={tag.id}\u0026gt;\n          #{tag.tag}\n        \u0026lt;/li\u0026gt;\n      ))}\n      \u0026lt;div\n        dangerouslySetInnerHTML={{\n          __html: `${blog.body}`,\n        }}\n      /\u0026gt;\n    \u0026lt;/main\u0026gt;\n  );\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"h8a50fc5ec1\"\u003e\u003cbr\u003eポイント解説\u003c/h3\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003efallback: false\u003c/code\u003e\u0026nbsp;の設定\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003ccode\u003egetStaticPaths\u003c/code\u003e\u0026nbsp;で\u0026nbsp;\u003ccode\u003ereturn { fallback: false };\u003c/code\u003e\u0026nbsp;と書いています。\u003cbr\u003e\u003cbr\u003eこれにより、\u0026nbsp;\u003ccode\u003ehttp://localhost:3000/blog/[存在しないコンテンツID]\u003c/code\u003e\u0026nbsp;のURLにアクセスすると404ページへ遷移するようになります。\u003cbr\u003e※\u0026nbsp;\u003ccode\u003efallback: true\u003c/code\u003e\u0026nbsp;にして存在しないURLにアクセスした場合はエラー画面が出てしまいます。\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003edangerouslySetInnerHTML\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e以下の通り、記事本文は\u0026nbsp;\u003ccode\u003edangerouslySetInnerHTML\u003c/code\u003e\u0026nbsp;を通して表示しています。\u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e\u0026lt;div\n  dangerouslySetInnerHTML={{\n    __html: `${blog.body}`,\n  }}\n/\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eAPIから返される記事本文は文字列形式（HTMLタグも文字列として取得される）なので、これをHTMLとして描画するために\u003ccode\u003edangerouslySetInnerHTML\u003c/code\u003e\u0026nbsp;を使っています。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h7941af99cd\"\u003e7. コードブロックのハイライトを行う\u003c/h2\u003e\u003cp\u003emicroCMSのリッチエディタでソースコードとして記述した部分は、\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e\u0026lt;pre\u0026gt;\n  \u0026lt;code\u0026gt;\n    // コード\n  \u0026lt;/code\u0026gt;\n\u0026lt;/pre\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eという形式で取得されます。\u003cbr\u003e\u003cbr\u003eこのままdangerouslySetInnerHTMLを通すだけでは、何もハイライトされていないコードが表示されるので、ライブラリを使って装飾していきます。\u003cbr\u003e\u003cbr\u003emicroCMSの公式で紹介されている、\u003ca style=\"color:#4aac00\" href=\"https://www.npmjs.com/package/cheerio\" target=\"_blank\" rel=\"noopener noreferrer\"\u003echeerio\u003c/a\u003eと\u003ca style=\"color:#4aac00\" href=\"https://www.npmjs.com/package/highlight.js\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehighlight.js\u003c/a\u003eというライブラリを使ってサーバーサイドでハイライトを行いました。\u003cbr\u003e\u003ca href=\"https://blog.microcms.io/syntax-highlighting-on-server-side/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eサーバサイドでシンタックスハイライトを行う\u003c/a\u003e\u003cbr\u003e\u003cbr\u003eまずはライブラリをインストールします。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ yarn add highlight.js cheerio\n$ yarn add --dev @types/highlightjs @types/cheerio\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e次にブログ記事を生成する際の\u0026nbsp;\u003ccode\u003egetStaticProps\u003c/code\u003e\u0026nbsp;内の記述を修正します。\u003cbr\u003e※ライブラリについての説明は上記のmicroCMSの記事などを参照ください。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// pages/blog/[id].tsx\n\n// importを追記\nimport cheerio from \"cheerio\";\nimport hljs from \"highlight.js\";\nimport \"highlight.js/styles/hybrid.css\";\n\n// 中略\n\nexport const getStaticProps: GetStaticProps\u0026lt;Props, Params\u0026gt; = async (\n  context\n) =\u0026gt; {\n  const id = context.params?.id;\n  const blog = await client.get({ endpoint: \"blog\", contentId: id });\n  // 以下の部分を追記\n  const $ = cheerio.load(blog.body);\n  $(\"pre code\").each((_, elm) =\u0026gt; {\n    const result = hljs.highlightAuto($(elm).text());\n    $(elm).html(result.value);\n    $(elm).addClass(\"hljs\");\n  });\n\n  return {\n    props: {\n      blog,\n      highlightedBody: $.html(),\n    },\n  };\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eこれでサーバーサード側でシンタックスハイライト済の記事データを取得することができます。\u003cbr\u003e\u003cbr\u003e※実装においては以下の記事も参考にさせていただきました。\u003cbr\u003e\u003ca href=\"https://www.blogchin.net/blogs/p9f3s1x5k5yb/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eNext.JS+microCMSで作成したブログに、ソースコードのシンタックスハイライトをつけてみる\u003c/a\u003e\u003cbr\u003e\u003ca href=\"https://qiita.com/cawauchi/items/ff6489b17800c5676908\" target=\"_blank\" rel=\"noopener noreferrer\"\u003enext.js+microcmsでシンタックスハイライトの導入 - Qiita\u003c/a\u003e\u003c/p\u003e\u003ch2 id=\"h5a51a8e35e\"\u003e\u003cbr\u003e8. 【おまけ】タグでの絞り込み機能\u003c/h2\u003e\u003cp\u003e先述の通り、今回は\u0026nbsp;\u003ccode\u003eblog\u003c/code\u003e\u0026nbsp;と\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;の2つのAPIを作成し、ブログ記事は複数の\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;を持てるようにしました。\u003cbr\u003e\u003cbr\u003eそして\u003c/p\u003e\u003cul\u003e\u003cli\u003e記事一覧画面で各記事が持つタグを表示\u003c/li\u003e\u003cli\u003eAPIから取得した\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;の一覧をサイドバーに表示（タグを選んで記事を絞り込む）\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eを出来るようにしました。\u003cbr\u003e\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/0ef6284906254e6580e558fae4082554/tag_serch.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h3ab24f6f50\"\u003eメリット\u003c/h3\u003e\u003cp\u003e\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;のAPIエンドポイントを別途作成する構成にしたことで、以下のようなメリットがあります。\u003c/p\u003e\u003cul\u003e\u003cli\u003eサイドバーに設置した\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;一覧の表示順の並べ替えや修正を、コードをいじらずmicroCMSの管理画面で行える。\u003c/li\u003e\u003cli\u003e\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;名を修正したい時に、記事のタグを一つひとつ修正しなくともAPIの\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;を修正すれば一括して変更できる。\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"h50d6571ee1\"\u003e\u003cbr\u003e実装方法（記事一覧の表示について）\u003c/h3\u003e\u003cp\u003eまずは、\u0026nbsp;\u003ccode\u003egetStaticProps\u003c/code\u003e\u0026nbsp;から受け取った記事をそのまま全て表示するのではなく、画面に表示する記事だけを格納する\u0026nbsp;\u003ccode\u003estate\u003c/code\u003e\u0026nbsp;を別途作成します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003econst [showBlogs, setShowBlogs] = useState(blogs)\n// 初期値にgetStaticPropsから受け取ったブログ記事データを入れる\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eそして画面には\u0026nbsp;\u003ccode\u003eshowBlogs\u003c/code\u003e\u0026nbsp;の中身を\u0026nbsp;\u003ccode\u003emap\u003c/code\u003e\u0026nbsp;で回して一覧表示します。\u003cbr\u003e※絞り込みによって\u0026nbsp;\u003ccode\u003eshowBlogs\u003c/code\u003e\u0026nbsp;に記事が入っていなかった場合のための条件付きレンダリングも記述しておきます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e{!showBlogs.length \u0026amp;\u0026amp; \u0026lt;p\u0026gt;There are no posts...\u0026lt;/p\u0026gt;}\n{showBlogs.map((blog) =\u0026gt; (\n    // 記事を表示\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003cstrong\u003e※注\u003c/strong\u003e\u003cbr\u003e\u003cstrong\u003eこのブログサイトはMaterialUIを使ってスタイリングを行っており、ここからは実際の実装通り、通常のHTMLタグではなくMaterialUIのタグで表記させていただきます。\u003c/strong\u003e\u003cbr\u003e\u003cstrong\u003e（MaterialUIのタグ名を見ればどんな役割の要素なのか想像がつくと思うので、MaterialUIに触れたことが無い方も何となく読み取っていただけるかなと思います。）\u003c/strong\u003e\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e記事の一覧表示の中で、この記事が持つ\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;も\u0026nbsp;\u003ccode\u003emap\u003c/code\u003e\u0026nbsp;で回して表示します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e{showBlogs.map((blog) =\u0026gt; (\n\n    // 中略\n\n    // 持っているtagを全て表示\n    {blog.tags.map((tag) =\u0026gt; (\n      \u0026lt;Typography key={tag.id}\u0026gt;\n        #{tag.tag}\n      \u0026lt;/Typography\u0026gt;\n    ))}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"h79fb2c15aa\"\u003e\u003cbr\u003e実装方法（タグによる絞り込みについて）\u003c/h3\u003e\u003cp\u003e\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;のAPIエンドポイントから受け取るデータは、以下の\u003ccode\u003etag\u003c/code\u003e型の配列でした。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eexport type Tag = {\n  id: string;\n  tag: string;\n  createdAt: string;\n  updatedAt: string;\n  publishedAt: string;\n  revisedAt: string;\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eなのでまずはこのデータから、tag名だけを抜き出して配列に格納します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// getStaticPropsで取得したtagsからtag名のみ抜き出す\nconst tagList = tags.map((tag) =\u0026gt; tag.tag);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e作成した\u0026nbsp;\u003ccode\u003etagList\u003c/code\u003e\u0026nbsp;を使って、サイドバーにタグ一覧を表示します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e\u0026lt;List\u0026gt;\n  \u0026lt;Typography\u0026gt;\n    # Tags\n  \u0026lt;/Typography\u0026gt;\n\n  \u0026lt;ListItemButton onClick={() =\u0026gt; selectTag(\"all\")}\u0026gt;\n    \u0026lt;ListItemText primary=\"All\"/\u0026gt;   // primaryに指定した文字列が表示される\n  \u0026lt;/ListItemButton\u0026gt;\n\n  {tagList.map((tag) =\u0026gt; (\n    \u0026lt;ListItemButton key={tag} onClick={() =\u0026gt; selectTag(tag)}\u0026gt;\n      \u0026lt;ListItemText primary={tag}/\u0026gt;   // primaryに指定した文字列が表示される\n    \u0026lt;/ListItemButton\u0026gt;\n  ))}\n\u0026lt;/List\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003eonClick\u003c/code\u003e\u0026nbsp;に指定した\u0026nbsp;\u003ccode\u003eselectTag()\u003c/code\u003e\u0026nbsp;メソッドを実装します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// タグ絞り込み\nconst selectTag = (tag: string) =\u0026gt; {\n  if (tag === \"all\") {\n    setShowBlogs(blogs);\n  } else {\n    const selectedBlogs = blogs.filter((blog) =\u0026gt; {\n      const haveTags = blog.tags.map((tag) =\u0026gt; tag.tag);\n      return haveTags.includes(tag);\n    });\n    setShowBlogs(selectedBlogs);\n  }\n\n  // 画面最上部へスクロールさせる\n  window.scrollTo({\n    top: 0,\n    behavior: \"smooth\",\n  });\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e検索のロジックについては以前別の記事に書いたので、詳しくはこちらをご覧ください。\u003cbr\u003e\u003ca style=\"color:#4aac00\" href=\"https://qiita.com/hinako_n/items/a0745afe0631578c698e\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eReactでリアルタイムの検索機能を実装する - Qiita\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e以上で「All」を選べば全記事が表示され、タグを選べばそのタグを持つ記事のみが表示されるようになりました。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h88cdec125d\"\u003e 9.【おまけ】ページネーション機能の実装\u003c/h2\u003e\u003cp\u003e\u003ccode\u003ereact-paginate\u003c/code\u003eというライブラリを使って、ページネーション機能を実装しました。  \u003cbr\u003eライブラリ： \u003ca href=\"https://www.npmjs.com/package/react-paginate \" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://www.npmjs.com/package/react-paginate \u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/9a2cb163f00a4910b6ebf063d87811ab/%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%8D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003cbr\u003eライブラリについての詳しい説明では割愛し、ここでは実装したコードだけ載せさせていただきます。\u003cbr\u003e使い方は以下の記事を参考にさせていただきました。\u003cbr\u003e\u003cbr\u003e\u003ca href=\"https://de-milestones.com/react_pagination/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://de-milestones.com/react_pagination/\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003ca href=\"https://tech.stmn.co.jp/entry/2020/10/28/141406\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://tech.stmn.co.jp/entry/2020/10/28/141406\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h2661198b93\"\u003e実装手順\u003c/h3\u003e\u003cp\u003eまずはライブラリをインストールします。\u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e$ yarn add react-paginate\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e記事一覧画面を編集していきます。\u003cbr\u003e\u003cbr\u003eページネーションの制御に使う \u003ccode\u003estate\u003c/code\u003eと、ページネーションをクリックした時に実行するメソッドを定義します。  \u003cbr\u003e\u003cbr\u003epages/index.tsx\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eimport ReactPaginate from \"react-paginate\";\n\n\n// 中略\n\n\u0026nbsp;const [offset, setOffset] = useState(0);\u0026nbsp;\u0026nbsp;// 何番目の記事から表示するか\n\u0026nbsp;const perPage = 6;\u0026nbsp;\u0026nbsp;// 1ページあたりに表示する記事数\n\n\u0026nbsp;const handlePageChange = (data: { selected: number }) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;// クリックしたページ数を{selected: 1}のようなオブジェクト形式で引数に受ける\n\u0026nbsp;\u0026nbsp;setOffset(data.selected * perPage)\u0026nbsp;\u0026nbsp;// 表示する記事の開始位置を変更\n\n\u0026nbsp;\u0026nbsp;// ページ最上部へスクロールする\n\u0026nbsp;\u0026nbsp;window.scrollTo({\u0026nbsp;\u0026nbsp;\u0026nbsp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;top: 0,\n\u0026nbsp;\u0026nbsp;\u0026nbsp;behavior: \"smooth\",\n\u0026nbsp;\u0026nbsp;});\n\u0026nbsp;};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e記事の一覧表示の箇所を修正します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// 表示する記事をsliceで抽出して一覧表示\n{showBlogs.slice(offset, offset + perPage).map((blog) =\u0026gt; (\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003cbr\u003eページネーションコンポーネントを記事一覧の下に設置します。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// ページネーションコンポーネント\n\u0026lt;ReactPaginate\n\u0026nbsp;\u0026nbsp;previousLabel={\"\u0026lt;\"}\u0026nbsp;// 前のページボタン\n\u0026nbsp;\u0026nbsp;nextLabel={\"\u0026gt;\"}\u0026nbsp;\u0026nbsp;// 次のページボタン\n\u0026nbsp;\u0026nbsp;pageCount={Math.ceil(blogs.length / perPage)}\u0026nbsp;\u0026nbsp;// ページ総数\n\u0026nbsp;\u0026nbsp;onPageChange={handlePageChange}\u0026nbsp;\u0026nbsp;// クリック時のfunction\n\u0026nbsp;\u0026nbsp;containerClassName={\"pagination\"}\u0026nbsp;\u0026nbsp;// ページネーションであるulに付くクラス名\n\u0026nbsp;\u0026nbsp;activeClassName={\"active\"}\u0026nbsp;\u0026nbsp;// アクティブなページのliに着くクラス名\n/\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eスタイルを付けます。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e.pagination {\n\u0026nbsp;display: flex;\n\u0026nbsp;align-items: center;\n\u0026nbsp;justify-content: center;\n\u0026nbsp;margin: 0 auto;\n\u0026nbsp;padding: 40px 0;\n}\n\n.pagination li {\n\u0026nbsp;margin: 0 16px;\n}\n\n.pagination li \u0026gt; a {\n\u0026nbsp;position: relative;\n\u0026nbsp;font-size: 16px;\n\u0026nbsp;width: 24px;\n\u0026nbsp;height: 24px;\n\u0026nbsp;outline: none;\n\u0026nbsp;z-index: 100;\n\u0026nbsp;cursor: pointer;\n}\n\n.pagination a::before {\n\u0026nbsp;content: \"\";\n\u0026nbsp;display: block;\n\u0026nbsp;position: absolute;\n\u0026nbsp;top: 50%;\n\u0026nbsp;left: 50%;\n\u0026nbsp;width: 32px;\n\u0026nbsp;height: 32px;\n\u0026nbsp;border-radius: 50%;\n\u0026nbsp;transform: translate(-50%, -50%);\n\u0026nbsp;z-index: -100;\n}\n\n.pagination li.active \u0026gt; a::before {\n\u0026nbsp;background-color: #929191;\n}\n\n.pagination li.active \u0026gt; a {\n\u0026nbsp;color: #f2f2f2;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e以上でページネーションを実装できました。\u003cbr\u003e\u003cbr\u003e予めフロント側で全件保持している記事データに対して表示を変えているだけなので、もちろんリロードもなく瞬時に切り替わります。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h9b4c4b9dd7\"\u003e 最後に\u003c/h2\u003e\u003cp\u003emicroCMSは公式のチュートリアルやブログが豊富で分かりやすく、機能もどんどん拡張されており（最初は公式SDKも無かったらしい）、長く使っていくにも安心だなと思いました。\u003cbr\u003e\u003cbr\u003eこのブログは最低限の機能を作ってデプロイしたのでまだまだ未完成ですが、これから機能拡大・スタイル修正していきたいなと思います。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h3bcda3e6b0\"\u003e最後に\u003c/h2\u003e\u003cp\u003emicroCMSは公式のチュートリアルやブログが豊富で分かりやすく、機能もどんどん拡張されており（最初は公式SDKも無かったらしい）、長く使っていくにも安心だなと思いました。\u003cbr\u003e\u003cbr\u003eこのブログは最低限の機能を作ってデプロイしたのでまだまだ未完成ですが、これから機能拡大・スタイル修正していきたいなと思います。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"he45680f0bc\"\u003e参考記事\u003c/h2\u003e\u003cp\u003e\u003ca href=\"https://zenn.dev/elletech/articles/nextjs_microcms\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eNext.js(TypeScript)、TailwindCSS、microCMSでブログを作成しよう！\u003c/a\u003e\u003cbr\u003e\u003ca href=\"https://blog.microcms.io/microcms-next-jamstack-blog/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003emicroCMS + Next.jsでJamstackブログを作ってみよう\u003c/a\u003e\u003cbr\u003e\u003ca href=\"https://fwywd.com/tech/next-eslint-prettier\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eNext.js (TypeScript) に ESLint と Prettier を導入し、コードを綺麗に保とう | fwywd（フュード）...\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e","tags":[{"id":"nextjs","createdAt":"2022-01-07T13:18:14.144Z","updatedAt":"2022-02-12T02:31:58.832Z","publishedAt":"2022-01-07T13:18:14.144Z","revisedAt":"2022-01-07T13:18:14.144Z","tag":"Next.js"},{"id":"microcms","createdAt":"2022-02-17T12:48:01.991Z","updatedAt":"2022-02-17T12:48:13.704Z","publishedAt":"2022-02-17T12:48:01.991Z","revisedAt":"2022-02-17T12:48:01.991Z","tag":"microCMS"},{"id":"typescript","createdAt":"2022-01-07T13:18:58.358Z","updatedAt":"2022-02-17T03:22:47.524Z","publishedAt":"2022-01-07T13:18:58.358Z","revisedAt":"2022-02-17T03:22:47.524Z","tag":"TypeScript"}],"image":"blog"},"highlightedBody":"\u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003ch2 id=\"h9707d3a59a\"\u003e概要\u003c/h2\u003e\u003cp\u003e\u003ccode\u003emicroCMS\u003c/code\u003e、\u003ccode\u003eNext.js（TypeScript）\u003c/code\u003eを使ってブログサイトを作成した手順と、追加で実装した機能について、またその過程で学んだことの備忘録記事です。\u003cbr\u003e\u003cbr\u003e基本的には公式のチュートリアル通りに進めていますが、TypeScriptの型付けや記事内のコードブロックのハイライトなど詰まった箇所もあったので、まとめておきたいと思います。\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eデプロイURL\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003ca href=\"https://microcms-blog-hinakonagao.vercel.app/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://microcms-blog-hinakonagao.vercel.app\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eGitHub\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003ca href=\"https://github.com/hinakonagao/microcms_blog\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://github.com/hinakonagao/microcms_blog\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e※この記事ではページのスタイリングは解説しません。\u003cbr\u003eMaterialUIを主に使用してスタイリングを行っているので、詳しいコードはGitHubをご覧いただければと思います。\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h48162eced8\"\u003e使用技術\u003c/h3\u003e\u003cul\u003e\u003cli\u003eNext.js　12.0.10\u003c/li\u003e\u003cli\u003eReact　17.0.2\u003c/li\u003e\u003cli\u003eTypeScript　4.5.5\u003c/li\u003e\u003cli\u003eESLint　8.8.0\u003c/li\u003e\u003cli\u003eprettier　2.5.1\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hc953739b3f\"\u003e全体の流れ\u003c/h2\u003e\u003cp\u003e１．microCMSの準備（アカウント作成・記事コンテンツのAPI作成）\u003cbr\u003e２．Next.jsのプロジェクト作成\u003cbr\u003e３．APIリクエストのための環境変数の設定\u003cbr\u003e４．公式のSDK「microcms-js-sdk」の導入\u003cbr\u003e５．記事一覧画面の作成\u003cbr\u003e６．記事詳細画面の作成\u003cbr\u003e７．コードブロックのシンタックスハイライトの実装\u003cbr\u003e８．【おまけ】タグでの絞り込み機能の実装\u003cbr\u003e９．【おまけ】ページネーション機能の実装\u003cbr\u003e\u003cbr\u003eというような流れで説明していきます。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hd1205c1797\"\u003e1. microCMSの準備\u003c/h2\u003e\u003cp\u003eまずはmicroCMSのアカウントを作成し、APIを作成します。\u003cbr\u003e\u003cbr\u003e手順は公式のチュートリアルに詳しく書かれているので、ここでの説明は割愛します。\u003cbr\u003e\u003ca style=\"color:#4aac00\" href=\"https://blog.microcms.io/microcms-next-jamstack-blog/#:%7E:text=%E3%81%8C%E7%AB%8B%E3%81%A1%E4%B8%8A%E3%81%8C%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82-,2.%20microCMS%E3%81%AE%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B,-%E6%AC%A1%E3%81%AB%E3%80%81microCMS%E3%81%A7\" target=\"_blank\" rel=\"noopener noreferrer\"\u003emicroCMS + Next.jsでJamstackブログを作ってみよう　2. microCMSの用意する\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e私は\u0026nbsp;\u003ccode\u003eblog\u003c/code\u003e\u0026nbsp;と\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;の2つのAPIエンドポイントを作成しました。\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"hebabef9705\"\u003eblog\u003c/h3\u003e\u003cp\u003eブログコンテンツを登録しておくリスト形式の API です。\u003c/p\u003e\u003cul\u003e\u003cli\u003etitle：記事タイトル\u003c/li\u003e\u003cli\u003ebody：記事本文\u003c/li\u003e\u003cli\u003etags：タグ（別のエンドポイント\u0026nbsp;\u003ccode\u003e/tag\u003c/code\u003e\u0026nbsp;に登録したタグを複数参照できるように設定）\u003c/li\u003e\u003cli\u003eimage：表示する画像名（プロジェクトディレクトリに保存した画像の中から、ブラウザに表示する画像を指定するために使用）\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/577556386f954864b763ec82bdea4d3c/blog.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h1d9b92c0c9\"\u003etag\u003c/h3\u003e\u003cp\u003eブログ記事に紐づけるタグを登録しておくリスト形式の API です。\u003cbr\u003e\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/24cd3d349eb74b35a9ee5ca8f901543a/tag.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hce660a84c7\"\u003e2. Next.jsプロジェクトを作成する\u003c/h2\u003e\u003cp\u003e下記のコマンドを実行してNext.jsのプロジェクトを作成し、続けて開発サーバーを立ち上げます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e$ yarn create \u003cspan class=\"hljs-keyword\"\u003enext\u003c/span\u003e-app --typescript\n\u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e プロジェクト名の入力を求められるので入力する\n\n$ cd .\u003cspan class=\"hljs-regexp\"\u003e/microcms_blog/\u003c/span\u003e\n\n$ yarn dev\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e次に\u003ccode\u003esrc\u003c/code\u003eディレクトリを作成して、\u003ccode\u003epages\u003c/code\u003eディレクトリと\u003ccode\u003estyles\u003c/code\u003eディレクトリを\u003ccode\u003esrc\u003c/code\u003eディレクトリの配下に移動させます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003emkdir\u003c/span\u003e src \u0026amp;\u0026amp; \u003cspan class=\"hljs-built_in\"\u003emv\u003c/span\u003e pages src \u0026amp;\u0026amp; \u003cspan class=\"hljs-built_in\"\u003emv\u003c/span\u003e styles src\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eさらに、モジュールのインポートを絶対パスで指定できるよう、ベースURLを\u0026nbsp;\u003ccode\u003esrc\u003c/code\u003e\u0026nbsp;ディレクトリに設定します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e tsconfig.json\n{\n  \u003cspan class=\"hljs-string\"\u003e\"compilerOptions\"\u003c/span\u003e: {\n    \u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e 追加\n    \u003cspan class=\"hljs-string\"\u003e\"baseUrl\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"src\"\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eベースURLの設定についてはこちらの記事を参考にさせていただきました。\u003cbr\u003e\u003ca href=\"https://fwywd.com/tech/next-base-url\" target=\"_blank\" rel=\"noopener noreferrer\"\u003e【Next.js】特定のディレクトリを基準にし、絶対パスでモジュールをインポートする方法 | fwywd（フュード）powered by キ...\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"ha56333b74a\"\u003eESLint / Prettier\u003c/h2\u003e\u003cp\u003eNext.js のバージョン11 からは、デフォルトでESLintが搭載されています。\u003cbr\u003eESLintに関するインストール済のパッケージは以下の2つです。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e package.json\n{\n  ...\n  \u003cspan class=\"hljs-string\"\u003e\"devDependencies\"\u003c/span\u003e: {\n    \u003cspan class=\"hljs-string\"\u003e\"eslint\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"8.8.0\"\u003c/span\u003e,    \u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e 構文解析のエンジン\n    \u003cspan class=\"hljs-string\"\u003e\"eslint-config-next\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"12.0.10\"\u003c/span\u003e,    \u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e ESLintのルール\n  }\n  ...\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eNext.js の新規プロジェクト作成時に生成された\u0026nbsp;\u003ccode\u003e.eslintrc\u003c/code\u003e\u0026nbsp;は ESLint の設定ファイルを意味しており、\u003cstrong\u003eデフォルトで\u0026nbsp;\u003c/strong\u003e\u003cstrong\u003e\u003ccode\u003eeslint-config-next\u003c/code\u003e\u003c/strong\u003e\u003cstrong\u003e\u0026nbsp;の設定が適用\u003c/strong\u003eされています。（ルールの詳細は後述）\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e .eslintrc.json\n\n{\n  \u003cspan class=\"hljs-string\"\u003e\"extends\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"next/core-web-vitals\"\u003c/span\u003e,\n}\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e少しだけESLintの設定を加えます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e .eslintrc.json\n\n{\n  \u003cspan class=\"hljs-string\"\u003e\"extends\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"next/core-web-vitals\"\u003c/span\u003e,\n  \u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e 以下のルールを追記\n  \u003cspan class=\"hljs-string\"\u003e\"rules\"\u003c/span\u003e: {\n    \u003cspan class=\"hljs-string\"\u003e\"react/display-name\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"off\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"react-hooks/exhaustive-deps\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"off\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"@next/next/no-sync-scripts\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"off\"\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003ePrettier は含まれていないため、インストールしておきます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e$ yarn -DE \u003cspan class=\"hljs-keyword\"\u003eadd \u003c/span\u003eprettier eslint-\u003cspan class=\"hljs-built_in\"\u003econfig\u003c/span\u003e-prettier\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"h5095390624\"\u003e\u003cbr\u003e3. 環境変数の設定\u003c/h2\u003e\u003cp\u003emicroCMSのAPIへアクセスする際は、サービスドメインを指定し、リクエストにそのサービスドメインのAPIキーを含める事でデータを取得することができます。\u003cbr\u003e\u003cbr\u003e※microCMSでのAPIキーの作成方法は公式ページを参照ください。\u003cbr\u003e\u003ca style=\"color:#4aac00\" href=\"https://document.microcms.io/content-api/x-microcms-api-key\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eAPIキー（X-MICROCMS-API-KEY）\u003c/a\u003e\u003cbr\u003e\u003cbr\u003eまずは環境変数を管理するファイルを作成します。\u003cbr\u003e※\u0026nbsp;\u003ccode\u003e.local\u003c/code\u003eをつけるとローカル環境で使うことができ、\u0026nbsp;\u003ccode\u003e.development\u003c/code\u003eをつけると開発環境で使えます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003etouch\u003c/span\u003e .env.development.local\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003e.env.development.local\u003c/code\u003eファイルを作成したら、\u003ccode\u003eサービスドメイン\u003c/code\u003eとmicroCMSの\u003ccode\u003eAPIキー\u003c/code\u003eを書き込みます。\u003cbr\u003e※サービスドメインは、例えば自分のmicroCMSページのURLが\u0026nbsp;\u003ccode\u003ehttps://aiueo.microcms.io/\u003c/code\u003e\u0026nbsp;であれば\u0026nbsp;\u003ccode\u003eaiueo\u003c/code\u003e\u0026nbsp;の部分になります。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-attr\"\u003eSERVICE_DOMAIN\u003c/span\u003e=xxxxxxxxxxx\n\u003cspan class=\"hljs-attr\"\u003eAPI_KEY\u003c/span\u003e=xxxxxxxxxxxx\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003eenv\u003c/code\u003e\u0026nbsp;ファイルに書いた値は、以下のようにしてプロジェクト内で参照することができます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003eprocess.env.API_KEY\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"h84f24c70f8\"\u003e\u003cbr\u003e4.microcms-js-sdkの準備\u003c/h2\u003e\u003cp\u003eAPIリクエストには公式が提供している\u003ccode\u003emicrocms-js-sdk\u003c/code\u003eを使います。\u003cbr\u003e\u003cbr\u003eまずは\u003ccode\u003emicrocms-js-sdk\u003c/code\u003eをインストールします。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e$ yarn \u003cspan class=\"hljs-built_in\"\u003eadd\u003c/span\u003e microcms-js-sdk\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003elibs/client.ts\u003c/code\u003e\u0026nbsp;を作成してSDKの初期化を行います。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003emkdir\u003c/span\u003e src/libs\u003c/span\u003e\n\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003etouch\u003c/span\u003e ./src/libs/client.ts\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003eserviceDomain\u003c/code\u003e\u0026nbsp;と\u0026nbsp;\u003ccode\u003eapiKey\u003c/code\u003e\u0026nbsp;の値は\u0026nbsp;\u003ccode\u003eenv\u003c/code\u003e\u0026nbsp;ファイルを参照します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-comment\"\u003e// libs/client.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createClient } from \u003cspan class=\"hljs-string\"\u003e\"microcms-js-sdk\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003econst\u003c/span\u003e client = \u003cspan class=\"hljs-built_in\"\u003ecreateClient\u003c/span\u003e({\n  serviceDomain: process.env.SERVICE_DOMAIN || \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e,\n  apiKey: process.env.API_KEY || \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e,\n});\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e※\u003ccode\u003eserviceDomain\u003c/code\u003e\u0026nbsp;と\u0026nbsp;\u003ccode\u003eapiKey\u003c/code\u003e\u0026nbsp;は\u0026nbsp;\u003ccode\u003estring\u003c/code\u003e型、.envファイルから参照する環境変数は\u0026nbsp;\u003ccode\u003estring | undefined\u003c/code\u003e型なので、もし以下のように\u0026nbsp;\u003ccode\u003e|| \"\"\u003c/code\u003e\u0026nbsp;の部分を書かないとエラーが出ます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003eserviceDomain: process.env.SERVICE_DOMAIN\n\u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e 型 \u003cspan class=\"hljs-string\"\u003e'string | undefined'\u003c/span\u003e を型 \u003cspan class=\"hljs-string\"\u003e'string'\u003c/span\u003e に割り当てることはできません。型 \u003cspan class=\"hljs-string\"\u003e'undefined'\u003c/span\u003e を型 \u003cspan class=\"hljs-string\"\u003e'string'\u003c/span\u003e に割り当てることはできません。\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"h4e79de37a7\"\u003e\u003cbr\u003e5. microCMSから記事データを取得する（一覧画面）\u003c/h2\u003e\u003ch3 id=\"hde4a1d43ba\"\u003e型の事前準備\u003c/h3\u003e\u003cp\u003emicroCMSから取得するブログ記事とタグのデータ型を定義しておきます。\u003cbr\u003e\u003cbr\u003e型定義ファイルを別途作成します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003emkdir\u003c/span\u003e src/types\u003c/span\u003e\n\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003etouch\u003c/span\u003e ./src/types/blog.ts\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e作成したファイルに型を定義します。\u003cbr\u003e今回私が作成したAPIだと以下の通りになります。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e// src/types/blog.ts\n\nexport type Blog = {\n  \u003cspan class=\"hljs-attribute\"\u003eid\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003ebody\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003etitle\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003etags\u003c/span\u003e: Tag[];\n  \u003cspan class=\"hljs-attribute\"\u003eimage\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003ecreatedAt\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003eupdatedAt\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003epublishedAt\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003erevisedAt\u003c/span\u003e: string;\n};\n\nexport type Tag = {\n  \u003cspan class=\"hljs-attribute\"\u003eid\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003etag\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003ecreatedAt\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003eupdatedAt\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003epublishedAt\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attribute\"\u003erevisedAt\u003c/span\u003e: string;\n};\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"hbc42ef09fb\"\u003e\u003cbr\u003eAPIリクエストを行う\u003c/h3\u003e\u003cp\u003e\u003ccode\u003egetStaticProps\u003c/code\u003eを使ってmicroCMSのAPIを叩き、データを取得します。\u003cbr\u003e\u003ccode\u003epages/index.tsx\u003c/code\u003e\u0026nbsp;に以下のように書きます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-comment\"\u003e// pages/index.js\u003c/span\u003e\n\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLink\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/link\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eInferGetStaticPropsType\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eNextPage\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { client } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"libs/client\"\u003c/span\u003e;    \u003cspan class=\"hljs-comment\"\u003e// srcから見た絶対パスで指定\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eBlog\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eTag\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"types/blog\"\u003c/span\u003e;    \u003cspan class=\"hljs-comment\"\u003e// srcから見た絶対パスで指定\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// microCMSへAPIリクエスト\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetStaticProps\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e blog = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e client.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eendpoint\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"blog\"\u003c/span\u003e });\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e tag = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e client.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eendpoint\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"tag\"\u003c/span\u003e });\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003eprops\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr\"\u003eblogs\u003c/span\u003e: blog.\u003cspan class=\"hljs-property\"\u003econtents\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003etags\u003c/span\u003e: tag.\u003cspan class=\"hljs-property\"\u003econtents\u003c/span\u003e,\n    },\n  };\n};\n\n\u003cspan class=\"hljs-comment\"\u003e// Props（blogsとtags）の型\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProps\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eblogs\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eBlog\u003c/span\u003e[];\n  \u003cspan class=\"hljs-attr\"\u003etags\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eTag\u003c/span\u003e[];\n};\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHome\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNextPage\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eInferGetStaticPropsType\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-keyword\"\u003etypeof\u003c/span\u003e getStaticProps\u0026gt;\u0026gt; = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{\n  blogs,\n  tags,\n}: Props\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(blogs);\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(tags);\n　\u003cspan class=\"hljs-comment\"\u003e// ... 以下省略\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eここで\u0026nbsp;\u003ccode\u003ehttp://localhost:3000\u003c/code\u003e\u0026nbsp;にアクセスすると、コンソールにAPIから取得したデータが表示されるはずです。\u003cbr\u003e\u003cbr\u003e私の作成したAPIだと、以下の画像のようなデータが取れています。\u003c/p\u003e\u003ch3 id=\"hf4a22cee96\"\u003eblogs\u003c/h3\u003e\u003cp\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/21ce7cb8666749859e4e9a8a1a57939a/blogs.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h0502f3a90c\"\u003etags\u003c/h3\u003e\u003cp\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/3634ac49f1c749069024d8d2e57474f1/tags.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003cbr\u003eではこのデータを画面に表示します。\u003cbr\u003e\u003cbr\u003e※ディレクトリ構成は以下のようにします。\u003c/p\u003e\u003cul\u003e\u003cli\u003epages/index.js\u0026nbsp;→ 記事一覧画面\u003c/li\u003e\u003cli\u003epages/blog/[id].ts → 記事詳細画面\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003e一覧画面に記事タイトルをリスト形式で表示し、記事詳細画面へのリンクをつけます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-comment\"\u003e// pages/index.tsx\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHome\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNextPage\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eInferGetStaticPropsType\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-keyword\"\u003etypeof\u003c/span\u003e getStaticProps\u0026gt;\u0026gt; = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{\n  blogs,\n  tags,\n}: Props\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        {blogs.map((blog) =\u0026gt; (\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{blog.id}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehref\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e`/\u003cspan class=\"hljs-attr\"\u003eblog\u003c/span\u003e/${\u003cspan class=\"hljs-attr\"\u003eblog.id\u003c/span\u003e}`}\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ea\u003c/span\u003e\u0026gt;\u003c/span\u003e{blog.title}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ea\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        ))}\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  )\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eこれで\u0026nbsp;\u003ccode\u003ehttp://localhost:3000\u003c/code\u003e\u0026nbsp;にアクセスすると記事タイトル一覧が表示され、タイトルをクリックすると\u0026nbsp;\u003ccode\u003ehttp://localhost:3000/blog/[microCMSで設定したコンテンツID]\u003c/code\u003e\u0026nbsp;のURLへ遷移するはずです。\u003cbr\u003e\u003cbr\u003e次にこの遷移先のページを作ります。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h85b588f038\"\u003e6. 記事詳細画面を作成する\u003c/h2\u003e\u003cp\u003e一覧画面でブログ記事の詳細画面を作っていきます。\u003cbr\u003e\u003cbr\u003e上記のリンク先に指定した通り、\u0026nbsp;\u003ccode\u003epages/blog/[id].ts\u003c/code\u003eに詳細画面を作ります。\u003cbr\u003eまずはファイルを作成します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003emkdir\u003c/span\u003e src/pages/blog\u003c/span\u003e\n\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003etouch\u003c/span\u003e ./src/pages/blog/[\u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e].tsx\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e作成したファイルを、以下のように編集します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-comment\"\u003e// pages/blog/[id].tsx\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003eGetStaticPaths\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eGetStaticProps\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eInferGetStaticPropsType\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eNextPage\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { client } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"libs/client\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eBlog\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"types/blog\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// APIリクエストを行うパスを指定\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003egetStaticPaths\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eGetStaticPaths\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eParams\u003c/span\u003e\u0026gt; = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e () =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e client.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eendpoint\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"blog\"\u003c/span\u003e });\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e paths = data.\u003cspan class=\"hljs-property\"\u003econtents\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003econtent\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`/blog/\u003cspan class=\"hljs-subst\"\u003e${content.id}\u003c/span\u003e`\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e { paths, \u003cspan class=\"hljs-attr\"\u003efallback\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e };\n};\n\n\u003cspan class=\"hljs-comment\"\u003e// microCMSへAPIリクエスト\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003egetStaticProps\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eGetStaticProps\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eProps\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eParams\u003c/span\u003e\u0026gt; = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e id = context.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e client.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eendpoint\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"blog\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003econtentId\u003c/span\u003e: id });\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003eprops\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr\"\u003eblog\u003c/span\u003e: data,\n    },\n  };\n};\n\n\u003cspan class=\"hljs-comment\"\u003e// // Props（blog）の型\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProps\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eblog\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eBlog\u003c/span\u003e;\n};\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBlogId\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNextPage\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eInferGetStaticPropsType\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-keyword\"\u003etypeof\u003c/span\u003e getStaticProps\u0026gt;\u0026gt; = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{\n  blog,\n}: Props\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emain\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e{blog.title}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e{blog.publishedAt}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            {blog.tags.map((tag) =\u0026gt; (\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{tag.id}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          #{tag.tag}\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      ))}\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003edangerouslySetInnerHTML\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{{\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003e__html:\u003c/span\u003e `${\u003cspan class=\"hljs-attr\"\u003eblog.body\u003c/span\u003e}`,\n        }}\n      /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003emain\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"h8a50fc5ec1\"\u003e\u003cbr\u003eポイント解説\u003c/h3\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003efallback: false\u003c/code\u003e\u0026nbsp;の設定\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003ccode\u003egetStaticPaths\u003c/code\u003e\u0026nbsp;で\u0026nbsp;\u003ccode\u003ereturn { fallback: false };\u003c/code\u003e\u0026nbsp;と書いています。\u003cbr\u003e\u003cbr\u003eこれにより、\u0026nbsp;\u003ccode\u003ehttp://localhost:3000/blog/[存在しないコンテンツID]\u003c/code\u003e\u0026nbsp;のURLにアクセスすると404ページへ遷移するようになります。\u003cbr\u003e※\u0026nbsp;\u003ccode\u003efallback: true\u003c/code\u003e\u0026nbsp;にして存在しないURLにアクセスした場合はエラー画面が出てしまいます。\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003edangerouslySetInnerHTML\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e以下の通り、記事本文は\u0026nbsp;\u003ccode\u003edangerouslySetInnerHTML\u003c/code\u003e\u0026nbsp;を通して表示しています。\u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003edangerouslySetInnerHTML\u003c/span\u003e=\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"hljs-template-variable\"\u003e{{\n    \u003cspan class=\"hljs-name\"\u003e__html:\u003c/span\u003e `${blog.body}`,\n  }}\u003c/span\u003e\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\n/\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eAPIから返される記事本文は文字列形式（HTMLタグも文字列として取得される）なので、これをHTMLとして描画するために\u003ccode\u003edangerouslySetInnerHTML\u003c/code\u003e\u0026nbsp;を使っています。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h7941af99cd\"\u003e7. コードブロックのハイライトを行う\u003c/h2\u003e\u003cp\u003emicroCMSのリッチエディタでソースコードとして記述した部分は、\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003epre\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ecode\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    // コード\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ecode\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003epre\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eという形式で取得されます。\u003cbr\u003e\u003cbr\u003eこのままdangerouslySetInnerHTMLを通すだけでは、何もハイライトされていないコードが表示されるので、ライブラリを使って装飾していきます。\u003cbr\u003e\u003cbr\u003emicroCMSの公式で紹介されている、\u003ca style=\"color:#4aac00\" href=\"https://www.npmjs.com/package/cheerio\" target=\"_blank\" rel=\"noopener noreferrer\"\u003echeerio\u003c/a\u003eと\u003ca style=\"color:#4aac00\" href=\"https://www.npmjs.com/package/highlight.js\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehighlight.js\u003c/a\u003eというライブラリを使ってサーバーサイドでハイライトを行いました。\u003cbr\u003e\u003ca href=\"https://blog.microcms.io/syntax-highlighting-on-server-side/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eサーバサイドでシンタックスハイライトを行う\u003c/a\u003e\u003cbr\u003e\u003cbr\u003eまずはライブラリをインストールします。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-variable\"\u003e$ \u003c/span\u003eyarn add highlight.js cheerio\n\u003cspan class=\"hljs-variable\"\u003e$ \u003c/span\u003eyarn add --dev \u003cspan class=\"hljs-variable\"\u003e@types\u003c/span\u003e/highlightjs \u003cspan class=\"hljs-variable\"\u003e@types\u003c/span\u003e/cheerio\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e次にブログ記事を生成する際の\u0026nbsp;\u003ccode\u003egetStaticProps\u003c/code\u003e\u0026nbsp;内の記述を修正します。\u003cbr\u003e※ライブラリについての説明は上記のmicroCMSの記事などを参照ください。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-comment\"\u003e// pages/blog/[id].tsx\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// importを追記\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e cheerio \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"cheerio\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e hljs \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"highlight.js\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"highlight.js/styles/hybrid.css\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// 中略\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003egetStaticProps\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eGetStaticProps\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eProps\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eParams\u003c/span\u003e\u0026gt; = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\n  context\n) =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e id = context.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e blog = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e client.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eendpoint\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"blog\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003econtentId\u003c/span\u003e: id });\n  \u003cspan class=\"hljs-comment\"\u003e// 以下の部分を追記\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e $ = cheerio.\u003cspan class=\"hljs-title function_\"\u003eload\u003c/span\u003e(blog.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e);\n  $(\u003cspan class=\"hljs-string\"\u003e\"pre code\"\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003eeach\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e_, elm\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = hljs.\u003cspan class=\"hljs-title function_\"\u003ehighlightAuto\u003c/span\u003e($(elm).\u003cspan class=\"hljs-title function_\"\u003etext\u003c/span\u003e());\n    $(elm).\u003cspan class=\"hljs-title function_\"\u003ehtml\u003c/span\u003e(result.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e);\n    $(elm).\u003cspan class=\"hljs-title function_\"\u003eaddClass\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"hljs\"\u003c/span\u003e);\n  });\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003eprops\u003c/span\u003e: {\n      blog,\n      \u003cspan class=\"hljs-attr\"\u003ehighlightedBody\u003c/span\u003e: $.\u003cspan class=\"hljs-title function_\"\u003ehtml\u003c/span\u003e(),\n    },\n  };\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eこれでサーバーサード側でシンタックスハイライト済の記事データを取得することができます。\u003cbr\u003e\u003cbr\u003e※実装においては以下の記事も参考にさせていただきました。\u003cbr\u003e\u003ca href=\"https://www.blogchin.net/blogs/p9f3s1x5k5yb/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eNext.JS+microCMSで作成したブログに、ソースコードのシンタックスハイライトをつけてみる\u003c/a\u003e\u003cbr\u003e\u003ca href=\"https://qiita.com/cawauchi/items/ff6489b17800c5676908\" target=\"_blank\" rel=\"noopener noreferrer\"\u003enext.js+microcmsでシンタックスハイライトの導入 - Qiita\u003c/a\u003e\u003c/p\u003e\u003ch2 id=\"h5a51a8e35e\"\u003e\u003cbr\u003e8. 【おまけ】タグでの絞り込み機能\u003c/h2\u003e\u003cp\u003e先述の通り、今回は\u0026nbsp;\u003ccode\u003eblog\u003c/code\u003e\u0026nbsp;と\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;の2つのAPIを作成し、ブログ記事は複数の\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;を持てるようにしました。\u003cbr\u003e\u003cbr\u003eそして\u003c/p\u003e\u003cul\u003e\u003cli\u003e記事一覧画面で各記事が持つタグを表示\u003c/li\u003e\u003cli\u003eAPIから取得した\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;の一覧をサイドバーに表示（タグを選んで記事を絞り込む）\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eを出来るようにしました。\u003cbr\u003e\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/0ef6284906254e6580e558fae4082554/tag_serch.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h3ab24f6f50\"\u003eメリット\u003c/h3\u003e\u003cp\u003e\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;のAPIエンドポイントを別途作成する構成にしたことで、以下のようなメリットがあります。\u003c/p\u003e\u003cul\u003e\u003cli\u003eサイドバーに設置した\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;一覧の表示順の並べ替えや修正を、コードをいじらずmicroCMSの管理画面で行える。\u003c/li\u003e\u003cli\u003e\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;名を修正したい時に、記事のタグを一つひとつ修正しなくともAPIの\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;を修正すれば一括して変更できる。\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"h50d6571ee1\"\u003e\u003cbr\u003e実装方法（記事一覧の表示について）\u003c/h3\u003e\u003cp\u003eまずは、\u0026nbsp;\u003ccode\u003egetStaticProps\u003c/code\u003e\u0026nbsp;から受け取った記事をそのまま全て表示するのではなく、画面に表示する記事だけを格納する\u0026nbsp;\u003ccode\u003estate\u003c/code\u003e\u0026nbsp;を別途作成します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003econst \u003cspan class=\"hljs-literal\"\u003e[\u003cspan class=\"hljs-identifier\"\u003eshowBlogs\u003c/span\u003e, \u003cspan class=\"hljs-identifier\"\u003esetShowBlogs\u003c/span\u003e]\u003c/span\u003e = use\u003cspan class=\"hljs-constructor\"\u003eState(\u003cspan class=\"hljs-params\"\u003eblogs\u003c/span\u003e)\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 初期値にgetStaticPropsから受け取ったブログ記事データを入れる\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eそして画面には\u0026nbsp;\u003ccode\u003eshowBlogs\u003c/code\u003e\u0026nbsp;の中身を\u0026nbsp;\u003ccode\u003emap\u003c/code\u003e\u0026nbsp;で回して一覧表示します。\u003cbr\u003e※絞り込みによって\u0026nbsp;\u003ccode\u003eshowBlogs\u003c/code\u003e\u0026nbsp;に記事が入っていなかった場合のための条件付きレンダリングも記述しておきます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e{!showBlogs.\u003cspan class=\"hljs-built_in\"\u003elength\u003c/span\u003e \u0026amp;\u0026amp; \u0026lt;p\u0026gt;There are no posts...\u0026lt;/p\u0026gt;}\n{showBlogs.\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eblog\u003c/span\u003e) =\u0026gt;\u003c/span\u003e (\n    \u003cspan class=\"hljs-comment\"\u003e// 記事を表示\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003cstrong\u003e※注\u003c/strong\u003e\u003cbr\u003e\u003cstrong\u003eこのブログサイトはMaterialUIを使ってスタイリングを行っており、ここからは実際の実装通り、通常のHTMLタグではなくMaterialUIのタグで表記させていただきます。\u003c/strong\u003e\u003cbr\u003e\u003cstrong\u003e（MaterialUIのタグ名を見ればどんな役割の要素なのか想像がつくと思うので、MaterialUIに触れたことが無い方も何となく読み取っていただけるかなと思います。）\u003c/strong\u003e\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e記事の一覧表示の中で、この記事が持つ\u0026nbsp;\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;も\u0026nbsp;\u003ccode\u003emap\u003c/code\u003e\u0026nbsp;で回して表示します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e{showBlogs.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eblog\u003c/span\u003e) =\u0026gt;\u003c/span\u003e (\n\n    \u003cspan class=\"hljs-comment\"\u003e// 中略\u003c/span\u003e\n\n    \u003cspan class=\"hljs-comment\"\u003e// 持っているtagを全て表示\u003c/span\u003e\n    {blog.\u003cspan class=\"hljs-property\"\u003etags\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003etag\u003c/span\u003e) =\u0026gt;\u003c/span\u003e (\n      \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eTypography\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{tag.id}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        #{tag.tag}\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eTypography\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n    ))}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"h79fb2c15aa\"\u003e\u003cbr\u003e実装方法（タグによる絞り込みについて）\u003c/h3\u003e\u003cp\u003e\u003ccode\u003etag\u003c/code\u003e\u0026nbsp;のAPIエンドポイントから受け取るデータは、以下の\u003ccode\u003etag\u003c/code\u003e型の配列でした。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003eexport \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTag\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003e= {\n  id\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003estring\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003etag\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003estring\u003c/span\u003e;\n  createdAt: \u003cspan class=\"hljs-keyword\"\u003estring\u003c/span\u003e;\n  updatedAt: \u003cspan class=\"hljs-keyword\"\u003estring\u003c/span\u003e;\n  publishedAt: \u003cspan class=\"hljs-keyword\"\u003estring\u003c/span\u003e;\n  revisedAt: \u003cspan class=\"hljs-keyword\"\u003estring\u003c/span\u003e;\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eなのでまずはこのデータから、tag名だけを抜き出して配列に格納します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e// getStaticPropsで取得したtagsから\u003cspan class=\"hljs-keyword\"\u003etag\u003c/span\u003e名のみ抜き出す\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etag\u003c/span\u003eList = tags.map((\u003cspan class=\"hljs-keyword\"\u003etag\u003c/span\u003e) =\u0026gt; \u003cspan class=\"hljs-keyword\"\u003etag\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003etag\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e作成した\u0026nbsp;\u003ccode\u003etagList\u003c/code\u003e\u0026nbsp;を使って、サイドバーにタグ一覧を表示します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eList\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eTypography\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    # Tags\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eTypography\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eListItemButton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e selectTag(\"all\")}\u0026gt;\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eListItemText\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eprimary\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"All\"\u003c/span\u003e/\u0026gt;\u003c/span\u003e   // primaryに指定した文字列が表示される\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eListItemButton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n  {tagList.map((tag) =\u0026gt; (\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eListItemButton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{tag}\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e selectTag(tag)}\u0026gt;\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eListItemText\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eprimary\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{tag}/\u003c/span\u003e\u0026gt;\u003c/span\u003e   // primaryに指定した文字列が表示される\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eListItemButton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  ))}\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eList\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003ccode\u003eonClick\u003c/code\u003e\u0026nbsp;に指定した\u0026nbsp;\u003ccode\u003eselectTag()\u003c/code\u003e\u0026nbsp;メソッドを実装します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-comment\"\u003e// タグ絞り込み\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eselectTag\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003etag: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e\u003c/span\u003e) =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (tag === \u003cspan class=\"hljs-string\"\u003e\"all\"\u003c/span\u003e) {\n    \u003cspan class=\"hljs-title function_\"\u003esetShowBlogs\u003c/span\u003e(blogs);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e selectedBlogs = blogs.\u003cspan class=\"hljs-title function_\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eblog\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e haveTags = blog.\u003cspan class=\"hljs-property\"\u003etags\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003etag\u003c/span\u003e) =\u0026gt;\u003c/span\u003e tag.\u003cspan class=\"hljs-property\"\u003etag\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e haveTags.\u003cspan class=\"hljs-title function_\"\u003eincludes\u003c/span\u003e(tag);\n    });\n    \u003cspan class=\"hljs-title function_\"\u003esetShowBlogs\u003c/span\u003e(selectedBlogs);\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// 画面最上部へスクロールさせる\u003c/span\u003e\n  \u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003escrollTo\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003etop\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ebehavior\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"smooth\"\u003c/span\u003e,\n  });\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e検索のロジックについては以前別の記事に書いたので、詳しくはこちらをご覧ください。\u003cbr\u003e\u003ca style=\"color:#4aac00\" href=\"https://qiita.com/hinako_n/items/a0745afe0631578c698e\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eReactでリアルタイムの検索機能を実装する - Qiita\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e以上で「All」を選べば全記事が表示され、タグを選べばそのタグを持つ記事のみが表示されるようになりました。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h88cdec125d\"\u003e 9.【おまけ】ページネーション機能の実装\u003c/h2\u003e\u003cp\u003e\u003ccode\u003ereact-paginate\u003c/code\u003eというライブラリを使って、ページネーション機能を実装しました。  \u003cbr\u003eライブラリ： \u003ca href=\"https://www.npmjs.com/package/react-paginate \" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://www.npmjs.com/package/react-paginate \u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/9a2cb163f00a4910b6ebf063d87811ab/%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%8D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3.jpg\" alt=\"\"\u003e\u003cbr\u003e\u003cbr\u003eライブラリについての詳しい説明では割愛し、ここでは実装したコードだけ載せさせていただきます。\u003cbr\u003e使い方は以下の記事を参考にさせていただきました。\u003cbr\u003e\u003cbr\u003e\u003ca href=\"https://de-milestones.com/react_pagination/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://de-milestones.com/react_pagination/\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003ca href=\"https://tech.stmn.co.jp/entry/2020/10/28/141406\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://tech.stmn.co.jp/entry/2020/10/28/141406\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h2661198b93\"\u003e実装手順\u003c/h3\u003e\u003cp\u003eまずはライブラリをインストールします。\u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e$ yarn \u003cspan class=\"hljs-built_in\"\u003eadd\u003c/span\u003e react-paginate\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e記事一覧画面を編集していきます。\u003cbr\u003e\u003cbr\u003eページネーションの制御に使う \u003ccode\u003estate\u003c/code\u003eと、ページネーションをクリックした時に実行するメソッドを定義します。  \u003cbr\u003e\u003cbr\u003epages/index.tsx\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReactPaginate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-paginate\"\u003c/span\u003e;\n\n\n\u003cspan class=\"hljs-comment\"\u003e// 中略\u003c/span\u003e\n\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [offset, setOffset] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// 何番目の記事から表示するか\u003c/span\u003e\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e perPage = \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// 1ページあたりに表示する記事数\u003c/span\u003e\n\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandlePageChange\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003edata: { selected: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e }\u003c/span\u003e) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// クリックしたページ数を{selected: 1}のようなオブジェクト形式で引数に受ける\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-title function_\"\u003esetOffset\u003c/span\u003e(data.\u003cspan class=\"hljs-property\"\u003eselected\u003c/span\u003e * perPage)\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// 表示する記事の開始位置を変更\u003c/span\u003e\n\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// ページ最上部へスクロールする\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003escrollTo\u003c/span\u003e({\u0026nbsp;\u0026nbsp;\u0026nbsp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-attr\"\u003etop\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-attr\"\u003ebehavior\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"smooth\"\u003c/span\u003e,\n\u0026nbsp;\u0026nbsp;});\n\u0026nbsp;};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e記事の一覧表示の箇所を修正します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 表示する記事をsliceで抽出して一覧表示\u003c/span\u003e\n{showBlogs.\u003cspan class=\"hljs-built_in\"\u003eslice\u003c/span\u003e(\u003cspan class=\"hljs-built_in\"\u003eoffset\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003eoffset\u003c/span\u003e + perPage).\u003cspan class=\"hljs-built_in\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eblog\u003c/span\u003e) =\u0026gt;\u003c/span\u003e (\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003cbr\u003eページネーションコンポーネントを記事一覧の下に設置します。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-comment\"\u003e// ページネーションコンポーネント\u003c/span\u003e\n\u0026lt;ReactPaginate\n\u0026nbsp;\u0026nbsp;previousLabel={\u003cspan class=\"hljs-string\"\u003e\"\u0026lt;\"\u003c/span\u003e}\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// 前のページボタン\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;nextLabel={\u003cspan class=\"hljs-string\"\u003e\"\u0026gt;\"\u003c/span\u003e}\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// 次のページボタン\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;pageCount={Math.\u003cspan class=\"hljs-built_in\"\u003eceil\u003c/span\u003e(blogs.\u003cspan class=\"hljs-built_in\"\u003elength\u003c/span\u003e / perPage)}\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// ページ総数\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;onPageChange={handlePageChange}\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// クリック時のfunction\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;containerClassName={\u003cspan class=\"hljs-string\"\u003e\"pagination\"\u003c/span\u003e}\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// ページネーションであるulに付くクラス名\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;activeClassName={\u003cspan class=\"hljs-string\"\u003e\"active\"\u003c/span\u003e}\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// アクティブなページのliに着くクラス名\u003c/span\u003e\n/\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eスタイルを付けます。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-selector-class\"\u003e.pagination\u003c/span\u003e {\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003edisplay\u003c/span\u003e: flex;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003ealign-items\u003c/span\u003e: center;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003ejustify-content\u003c/span\u003e: center;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003emargin\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e auto;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003epadding\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e40px\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-selector-class\"\u003e.pagination\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eli\u003c/span\u003e {\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003emargin\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e16px\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-selector-class\"\u003e.pagination\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eli\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-selector-tag\"\u003ea\u003c/span\u003e {\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003eposition\u003c/span\u003e: relative;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003efont-size\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e16px\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003ewidth\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e24px\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003eheight\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e24px\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003eoutline\u003c/span\u003e: none;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003ez-index\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003ecursor\u003c/span\u003e: pointer;\n}\n\n\u003cspan class=\"hljs-selector-class\"\u003e.pagination\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003ea\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e::before\u003c/span\u003e {\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003edisplay\u003c/span\u003e: block;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003eposition\u003c/span\u003e: absolute;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003etop\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e50%\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003eleft\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e50%\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003ewidth\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e32px\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003eheight\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e32px\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003eborder-radius\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e50%\u003c/span\u003e;\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003etransform\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003etranslate\u003c/span\u003e(-\u003cspan class=\"hljs-number\"\u003e50%\u003c/span\u003e, -\u003cspan class=\"hljs-number\"\u003e50%\u003c/span\u003e);\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003ez-index\u003c/span\u003e: -\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-selector-class\"\u003e.pagination\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eli\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.active\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-selector-tag\"\u003ea\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e::before\u003c/span\u003e {\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003ebackground-color\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e#929191\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-selector-class\"\u003e.pagination\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eli\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.active\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-selector-tag\"\u003ea\u003c/span\u003e {\n\u0026nbsp;\u003cspan class=\"hljs-attribute\"\u003ecolor\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e#f2f2f2\u003c/span\u003e;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e以上でページネーションを実装できました。\u003cbr\u003e\u003cbr\u003e予めフロント側で全件保持している記事データに対して表示を変えているだけなので、もちろんリロードもなく瞬時に切り替わります。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h9b4c4b9dd7\"\u003e 最後に\u003c/h2\u003e\u003cp\u003emicroCMSは公式のチュートリアルやブログが豊富で分かりやすく、機能もどんどん拡張されており（最初は公式SDKも無かったらしい）、長く使っていくにも安心だなと思いました。\u003cbr\u003e\u003cbr\u003eこのブログは最低限の機能を作ってデプロイしたのでまだまだ未完成ですが、これから機能拡大・スタイル修正していきたいなと思います。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h3bcda3e6b0\"\u003e最後に\u003c/h2\u003e\u003cp\u003emicroCMSは公式のチュートリアルやブログが豊富で分かりやすく、機能もどんどん拡張されており（最初は公式SDKも無かったらしい）、長く使っていくにも安心だなと思いました。\u003cbr\u003e\u003cbr\u003eこのブログは最低限の機能を作ってデプロイしたのでまだまだ未完成ですが、これから機能拡大・スタイル修正していきたいなと思います。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"he45680f0bc\"\u003e参考記事\u003c/h2\u003e\u003cp\u003e\u003ca href=\"https://zenn.dev/elletech/articles/nextjs_microcms\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eNext.js(TypeScript)、TailwindCSS、microCMSでブログを作成しよう！\u003c/a\u003e\u003cbr\u003e\u003ca href=\"https://blog.microcms.io/microcms-next-jamstack-blog/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003emicroCMS + Next.jsでJamstackブログを作ってみよう\u003c/a\u003e\u003cbr\u003e\u003ca href=\"https://fwywd.com/tech/next-eslint-prettier\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eNext.js (TypeScript) に ESLint と Prettier を導入し、コードを綺麗に保とう | fwywd（フュード）...\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003c/body\u003e\u003c/html\u003e"},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"microcms-nextjs-blog"},"buildId":"0TYNhiW2GzUBjQtD0t7Rn","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>