<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/4bc12c1be68739c7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4bc12c1be68739c7.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8d58b9228ffac9a6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8d58b9228ffac9a6.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-d7b038a63b619762.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-101cfeaa18eb0e64.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5a602b05d6a5b45c.js" defer=""></script><script src="/_next/static/chunks/451-8446afed8f2a81ca.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bid%5D-7b5e07e6b1c54b77.js" defer=""></script><script src="/_next/static/EwuWiZmkeG3lYlO_XC9fM/_buildManifest.js" defer=""></script><script src="/_next/static/EwuWiZmkeG3lYlO_XC9fM/_ssgManifest.js" defer=""></script><script src="/_next/static/EwuWiZmkeG3lYlO_XC9fM/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><style data-emotion="css a6by8m">.css-a6by8m{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:auto;}</style><div class="MuiGrid-root MuiGrid-container css-a6by8m"><style data-emotion="css d0aeej">.css-d0aeej{background-color:#FFF;color:#222;margin:30px auto;padding:36px;}.css-d0aeej h1,.css-d0aeej h2,.css-d0aeej h3{font-weight:550;}</style><style data-emotion="css vx8k43">.css-vx8k43{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:91.666667%;-ms-flex-preferred-size:91.666667%;flex-basis:91.666667%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:91.666667%;background-color:#FFF;color:#222;margin:30px auto;padding:36px;}@media (min-width:600px){.css-vx8k43{-webkit-flex-basis:91.666667%;-ms-flex-preferred-size:91.666667%;flex-basis:91.666667%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:91.666667%;}}@media (min-width:900px){.css-vx8k43{-webkit-flex-basis:75%;-ms-flex-preferred-size:75%;flex-basis:75%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:75%;}}@media (min-width:1200px){.css-vx8k43{-webkit-flex-basis:75%;-ms-flex-preferred-size:75%;flex-basis:75%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:75%;}}@media (min-width:1536px){.css-vx8k43{-webkit-flex-basis:75%;-ms-flex-preferred-size:75%;flex-basis:75%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:75%;}}.css-vx8k43 h1,.css-vx8k43 h2,.css-vx8k43 h3{font-weight:550;}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-11 MuiGrid-grid-md-9 css-vx8k43"><style data-emotion="css tph460">.css-tph460{padding:15px 0px;border-bottom:1px solid #4682B4;}</style><div class="css-tph460"><style data-emotion="css 1x4m838">.css-1x4m838{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;font-size:26px;font-weight:540;padding-bottom:16px;}</style><p class="MuiTypography-root MuiTypography-body1 css-1x4m838">Reactでリアルタイムの検索機能を実装する</p><style data-emotion="css q5vujz">.css-q5vujz{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;display:inline-block;padding-right:32px;}</style><p class="MuiTypography-root MuiTypography-body2 css-q5vujz"><style data-emotion="css 1eipbkb">.css-1eipbkb{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;font-size:15px;margin-right:4px;vertical-align:middle;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1eipbkb" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="AccessTimeIcon"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path><path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path></svg>投稿日 <!-- -->2022/2/6</p><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1eipbkb" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="LocalOfferIcon"><path d="m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"></path></svg><style data-emotion="css 1lc4u9f">.css-1lc4u9f{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;display:inline-block;padding-right:8px;}</style><p class="MuiTypography-root MuiTypography-body2 css-1lc4u9f">#<!-- -->React</p></div><style data-emotion="css il3arz">.css-il3arz{margin-top:40px;}.css-il3arz a{color:#639bb7;}.css-il3arz a:hover{color:#0b7eb8;-webkit-text-decoration:underline;text-decoration:underline;}</style><div class="css-il3arz"><html><head></head><body><p>個人ブログサイトを作った際、記事一覧画面にキーワード検索やカテゴリーで絞り込む機能を実装しました。<br><br>APIから取得したコンテンツなどフロントエンドで保持しているデータに対して絞り込みを行う機能は色んな場面で使えるかなと思うので、そのロジックと具体的な実装方法をまとめておきます。<br></p><h2 id="h652c073a9b">基本的なロジック</h2><p><br>データの絞り込みを行う基本的なロジックは、JavaScriptの組み込み関数の<code>fitler</code>  を利用した<strong>配列操作</strong>です。<br></p><blockquote><code> filter()</code>メソッドは、与えられた関数によって実装されたテストに合格したすべての配列からなる<strong>新しい配列を生成</strong>します。<br><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter</a></blockquote><p><a style="background-color:#ffffff" href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter</a><br></p><pre><code class="hljs">[<span class="hljs-string">"りんご"</span>, <span class="hljs-string">"みかん"</span>, <span class="hljs-string">"いちご"</span>].<span class="hljs-built_in">filter</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">text</span></span>) =&gt;</span> {
&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-built_in">text</span> !== <span class="hljs-string">"りんご"</span>;
});

<span class="hljs-comment">// #=&gt; ["みかん", "いちご"];</span></code></pre><p><br>filterメソッドを使ってReactで検索機能を実装する流れは以下の通りです。<br></p><ol><li>ユーザーから検索条件を受け取る。（キーワードの入力、カテゴリーの選択など）</li><li>全てのデータが入った配列に対して、filterメソッドにより1.で受け取った検索条件に合致するデータのみを選別して新しい配列を生成する。</li><li>2.で生成された配列の中身を画面に一覧表示する。</li></ol><p><br></p><h2 id="hb4d7d075a8">検索機能の実装例</h2><p><br>以下のURLはこれから説明する検索機能を実装したサンプルコードです。<br><br>サンプルコードにある、<code>①カテゴリー選択ボタンによる検索</code> と<code>②フリーキーワード検索</code>について解説していきます。 <br></p><iframe class="embedly-embed" src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fc93jo&amp;display_name=CodeSandbox&amp;url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fc93jo&amp;image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fc93jo%2Fscreenshot.png&amp;key=94335756f04b424b8ce3ce71cbe3de0a&amp;type=text%2Fhtml&amp;schema=codesandbox" width="1000" height="500" scrolling="no" title="CodeSandbox embed" frameborder="0" allow="autoplay; fullscreen" allowfullscreen="true"></iframe><p><a href="https://codesandbox.io/s/react-serch-c93jo?file=/src/App.js" target="_blank" rel="noopener noreferrer">https://codesandbox.io/s/react-serch-c93jo?file=/src/App.js</a><br><br>実際のWebサービスでは、ブログ記事のデータはAPIから受け取ることが多いかと思いますが、今回は予め <code>posts</code> という配列で記事データを用意し、フロント側で保持しておきます。<br><br>【検索対象とする記事データ】</p><pre><code class="hljs">const posts = [
&nbsp;{
&nbsp;&nbsp;<span class="hljs-keyword">title</span>: <span class="hljs-string">'useStateの使い方'</span>,
&nbsp;&nbsp;category: <span class="hljs-string">'React'</span>
&nbsp;},
&nbsp;{
&nbsp;&nbsp;<span class="hljs-keyword">title</span>: <span class="hljs-string">'LaravelのMVCモデルについて'</span>,
&nbsp;&nbsp;category: <span class="hljs-string">'Laravel'</span>
&nbsp;},
&nbsp;{
&nbsp;&nbsp;<span class="hljs-keyword">title</span>: <span class="hljs-string">'同一オリジンポリシーとCORS'</span>,
&nbsp;&nbsp;category: <span class="hljs-string">'Web'</span>
&nbsp;},
&nbsp;{
&nbsp;&nbsp;<span class="hljs-keyword">title</span>: <span class="hljs-string">'useEffectの使い方'</span>,
&nbsp;&nbsp;category: <span class="hljs-string">'React'</span>
&nbsp;}
]</code></pre><p><br>そして、画面に表示する記事データを管理するための状態変数 <code>showPosts</code>  を用意し、<code>showPosts</code>の記事を一覧表示します。 <br><code>showPosts</code>の初期値には、上記の<code>posts</code>を入れておきます。   <br></p><pre><code class="hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {
&nbsp;<span class="hljs-keyword">const</span> [showPosts, setShowPosts] = <span class="hljs-title function_">useState</span>(posts);

&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>記事一覧<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
&nbsp;&nbsp;&nbsp;{showPosts.map((post, index) =&gt; {
&nbsp;&nbsp;&nbsp;&nbsp;return (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{post.title}</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{index+1}. {post.title}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>category：{post.category}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;);
&nbsp;&nbsp;&nbsp;})}
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&nbsp;);
}</code></pre><p><br>ブラウザに表示すると以下の通りです。<br><img src="https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/4218f0d2e06447bcaad24ed417b5c3a9/blogs.png" alt=""><br>この記事一覧に対して絞り込みを行っていきます。<br></p><h2 id="hc8bb7fb60d">①カテゴリー選択ボタンによる検索</h2><p>まずは、カテゴリー選択ボタンでカテゴリーを絞り込む機能を実装してみます。<br></p><h3 id="h2661198b93">実装手順</h3><p>1. カテゴリーリストの配列を作成<br>2. カテゴリー選択ボタンを設置<br>3. <code>onClick</code>時に実行して絞り込み処理を行う<code>selectCategory</code>メソッドを定義   <br><br>実装したコードはこちらです。</p><pre><code class="hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {

&nbsp;<span class="hljs-keyword">const</span> [showPosts, setShowPosts] = <span class="hljs-title function_">useState</span>(posts);

&nbsp;<span class="hljs-comment">// カテゴリーリスト</span>
&nbsp;<span class="hljs-keyword">const</span> categories = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(posts.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">post</span>) =&gt;</span> post.<span class="hljs-property">category</span>)));
	
&nbsp;<span class="hljs-comment">// カテゴリー絞り込み</span>
&nbsp;<span class="hljs-keyword">const</span> <span class="hljs-title function_">selectCategory</span> = (<span class="hljs-params">category</span>) =&gt; {
&nbsp;&nbsp;<span class="hljs-comment">// allを選択した場合は早期return</span>
&nbsp;&nbsp;<span class="hljs-keyword">if</span> (category === <span class="hljs-string">"all"</span>) {
&nbsp;&nbsp;&nbsp;<span class="hljs-title function_">setShowPosts</span>(posts);
&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;
&nbsp;&nbsp;}

&nbsp;&nbsp;<span class="hljs-keyword">const</span> selectedPosts = posts.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">post</span>) =&gt;</span> post.<span class="hljs-property">category</span> === category);
&nbsp;&nbsp;<span class="hljs-title function_">setShowPosts</span>(selectedPosts);
&nbsp;};
&nbsp;&nbsp;

&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>記事一覧<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

&nbsp;&nbsp;&nbsp;{/* カテゴリー選択ボタン */}
&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Category：<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> selectCategory("all")}&gt;All<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;{categories.map((category) =&gt; (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> selectCategory(category)}&gt;{category}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;))}
&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

&nbsp;&nbsp;&nbsp;{showPosts.map((post, index) =&gt; {
&nbsp;&nbsp;&nbsp;&nbsp;return (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{post.title}</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{index + 1}. {post.title}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>category：{post.category}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;);
&nbsp;&nbsp;&nbsp;})}
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&nbsp;);
}</code></pre><p><br></p><h3 id="h8a50fc5ec1">ポイント解説</h3><p><br>ひとつずつ解説します。<br><br><strong>1.カテゴリーリストの配列を作成</strong> <br><code>posts</code>配列に記事が存在するカテゴリーの分だけカテゴリー選択ボタンを設置したいので、まずはカテゴリーのリストを作成します。  </p><pre><code class="hljs"><span class="hljs-regexp">//</span> カテゴリーリスト
const categories = <span class="hljs-built_in">Array</span>.<span class="hljs-keyword">from</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(posts.map(<span class="hljs-function"><span class="hljs-params">(post)</span> =&gt;</span> post.category)));</code></pre><p><br>JavaScriptの<code>Setオブジェクト</code>を使って、<code>posts</code>  に存在するカテゴリーを<strong> 重複排除</strong>して格納したカテゴリーリストを作っています。 <br>Setオブジェクトについては以下の記事を参考にしました。<br><a href="https://qiita.com/netebakari/items/7c1db0b0cea14a3d4419" target="_blank" rel="noopener noreferrer">https://qiita.com/netebakari/items/7c1db0b0cea14a3d4419</a><br><br>SetオブジェクトはES2015から導入された機能で、重複した値が無いことを保証してくれます。</p><blockquote> Setオブジェクトは値のコレクションです。挿入順に要素を反復することができます。Setに<strong>重複する値は格納出来ません</strong>。Set内の値はコレクション内で一意となります。<br><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Set">&nbsp;</a><a href="unsafe:[object Object]">https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Set</a></blockquote><p><br><strong>2.　カテゴリー選択ボタンを設置</strong> <br>各カテゴリーを選択するボタンと、全ての記事を表示するためのAllボタンを作ります。<br><br>1.で作成したカテゴリーリストの分だけカテゴリー選択ボタンを設置します。<br><br>カテゴリー選択ボタンとAllボタンの<code>onClick</code>時には<code>selectCategory</code>メソッドを実行し、引数には該当のカテゴリーを渡しています。   </p><pre><code class="hljs">&lt;<span class="hljs-keyword">button</span> <span class="hljs-keyword">onClick</span>={() =&gt; selectCategory(<span class="hljs-string">"all"</span>)}&gt;All&lt;/<span class="hljs-keyword">button</span>&gt;
{categories.map((category) =&gt; (
&nbsp;&nbsp;&lt;<span class="hljs-keyword">button</span> <span class="hljs-keyword">onClick</span>={() =&gt; selectCategory(category)}&gt;{category}&lt;/<span class="hljs-keyword">button</span>&gt;
))}</code></pre><p><br><strong>3.　onClick時に実行するselectCategoryメソッドを定義</strong> <br><code>posts</code>の中から、選択されたカテゴリーと一致するカテゴリーの記事のみを<code>filter</code>メソッドで選別しています。   <br><br>絞り込み後の配列を、一覧表示に使う状態変数<code>showPosts</code>にセットしています。  </p><pre><code class="hljs">const selectCategory <span class="hljs-operator">=</span> (category) <span class="hljs-operator">=</span>&gt; {
&nbsp;// allの場合は早期return
&nbsp;if (category <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">"all"</span>) {
&nbsp;&nbsp;&nbsp;setShowPosts(posts)<span class="hljs-comment">;</span>
&nbsp;&nbsp;&nbsp;return<span class="hljs-comment">;</span>
&nbsp;}
&nbsp;const selectedPosts <span class="hljs-operator">=</span> posts.filter((post) <span class="hljs-operator">=</span>&gt; post.category <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> category)<span class="hljs-comment">;</span>
&nbsp;setShowPosts(selectedPosts)<span class="hljs-comment">;</span>
}</code></pre><p><br></p><h2 id="h9f9b4f1e4a">②フリーキーワード</h2><p><br>次に、ユーザーの入力値による絞り込み（フリーキーワード検索）の機能を実装してみます。<br></p><h3 id="h2661198b93">実装手順</h3><p><br>1. 検索フォームへの入力値を保持する状態変数<code>inputValue</code>を定義  <br>2. フリーキーワード検索フォームを設置<br>3. 検索フォームの<code>onChange</code>時に実行する<code>handleInputChange</code>メソッドを定義   <br>4. 検索フォームへの入力値が変わる度に実行して絞り込みを行う<code>search</code>メソッドを定義  <br></p><pre><code class="hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {
&nbsp;<span class="hljs-keyword">const</span> [showPosts, setShowPosts] = <span class="hljs-title function_">useState</span>(posts)
&nbsp;<span class="hljs-keyword">const</span> [inputValue, setInputValue] = <span class="hljs-title function_">useState</span>()

&nbsp;<span class="hljs-comment">// 検索欄への入力値をハンドリング</span>
&nbsp;<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleInputChange</span> = (<span class="hljs-params">e</span>) =&gt; {
&nbsp;&nbsp;<span class="hljs-title function_">setInputValue</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)
&nbsp;&nbsp;<span class="hljs-title function_">search</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)
&nbsp;}

&nbsp;<span class="hljs-comment">// 検索欄への入力値での絞り込み</span>
&nbsp;<span class="hljs-keyword">const</span> <span class="hljs-title function_">search</span> = (<span class="hljs-params">value</span>) =&gt; {
&nbsp;&nbsp;<span class="hljs-comment">// 検索欄への入力が空の場合は早期return</span>
&nbsp;&nbsp;<span class="hljs-keyword">if</span> (value === <span class="hljs-string">""</span>) {
&nbsp;&nbsp;&nbsp;<span class="hljs-title function_">setShowPosts</span>(posts);
&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;
&nbsp;&nbsp;}

&nbsp;&nbsp;<span class="hljs-keyword">const</span> serchedPosts = posts.<span class="hljs-title function_">filter</span>(
&nbsp;&nbsp;&nbsp;<span class="hljs-function">(<span class="hljs-params">post</span>) =&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(post).<span class="hljs-title function_">filter</span>(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item !== <span class="hljs-literal">undefined</span> &amp;&amp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item !== <span class="hljs-literal">null</span> &amp;&amp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.<span class="hljs-title function_">toUpperCase</span>().<span class="hljs-title function_">indexOf</span>(value.<span class="hljs-title function_">toUpperCase</span>()) !== -<span class="hljs-number">1</span>
&nbsp;&nbsp;&nbsp;&nbsp;).<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>
&nbsp;&nbsp;);

&nbsp;&nbsp;<span class="hljs-title function_">setShowPosts</span>(serchedPosts);
&nbsp;}

&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>記事一覧<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

&nbsp;&nbsp;&nbsp;{/* フリーキーワード検索フォーム */}
&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>Search<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{inputValue}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleInputChange}</span> /&gt;</span>
&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

&nbsp;&nbsp;&nbsp;{/* 記事一覧表示 */}
&nbsp;&nbsp;&nbsp;{showPosts.map((post, index) =&gt; {
&nbsp;&nbsp;&nbsp;&nbsp;return (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{post.title}</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{index + 1}. {post.title}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>category：{post.category}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;);
&nbsp;&nbsp;&nbsp;})}
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&nbsp;);
}</code></pre><p><br></p><h3 id="h8a50fc5ec1">ポイント解説</h3><p><br>大体はReactの基本の知識でカバーできるかと思います。<br><br>4.の絞り込みを行うロジックの部分は一見ややこしいですが、一つずつ読み解いて解説していきます。<br><br>記事の絞り込みを行っているのは以下の部分です。</p><pre><code class="hljs">const serchedPosts = posts.<span class="hljs-built_in">filter</span>(
&nbsp;<span class="hljs-function">(<span class="hljs-params">post</span>) =&gt;</span>
&nbsp;&nbsp;Object.values(post).<span class="hljs-built_in">filter</span>(
&nbsp;&nbsp;&nbsp;<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;item !== <span class="hljs-literal">undefined</span> &amp;&amp;
&nbsp;&nbsp;&nbsp;&nbsp;item !== <span class="hljs-literal">null</span> &amp;&amp;
&nbsp;&nbsp;&nbsp;&nbsp;item.toUpperCase().<span class="hljs-built_in">indexOf</span>(value.toUpperCase()) !== <span class="hljs-number">-1</span>
&nbsp;&nbsp;).<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">0</span>
)</code></pre><p><br>このコードでは、<br></p><ul><li>タイトルもしくはカテゴリーの<strong>いずれか</strong>にユーザーの入力値を<strong>含む</strong>（全一致ではない） </li><li>大文字小文字の違いは許容 </li></ul><p><br>という要件で絞り込んでいます。<br><br>要点を解説していきます。<br></p><ul><li> <strong>Object.values()</strong> </li></ul><pre><code class="hljs"><span class="hljs-keyword">Object</span>.<span class="hljs-keyword">values</span>(post)</code></pre><p><br>上記の部分で、オブジェクトの<strong>プロパティの値を配列で取得</strong>する`Object.values()`メソッドを使い、検索対象の値を格納した配列を作ります。 <br><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/values" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/values</a><br></p><ul><li> <strong>undefinedとnullを除外</strong> </li></ul><pre><code class="hljs">item !== undefined <span class="hljs-meta">&amp;&amp;</span>
item !== <span class="hljs-literal">null</span> <span class="hljs-meta">&amp;&amp;</span></code></pre><p><br>次に出てくる<code>toUpperCase()</code>は<code>null</code>や<code>undefined</code>の値に対しては使えません。    <br><br>なので仮にこの2行が無いと、<code>Obect.values(post)</code>で生成された配列の中に<code>undefined</code>もしくは<code>null</code>があった場合 <code>Cannot read properties of null (reading 'toUpperCase')</code> というエラーが出ます。     <br></p><ul><li> <strong>toUpperCase()</strong> </li></ul><blockquote><strong>toUpperCase()</strong>メソッドは、呼び出す文字列の値を（文字列でない場合、文字列に変換して）大文字に変換して返します。<br><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase">&nbsp;https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase</a></blockquote><p><br><strong>記事のタイトルとカテゴリー</strong>と、<strong>ユーザーの入力値</strong> の双方を大文字に変換することで、<strong>大文字・小文字の違いは許容</strong>します。  <br></p><ul><li> <strong>indexOf()</strong></li></ul><blockquote><strong>indexOf()</strong>メソッドは、呼び出す<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noopener noreferrer">String</a>オブジェクト中で、 <code>fromIndex</code>   から検索を始め、指定された値が最初に現れたインデックスを返します。値が見つからない場合は&nbsp;<code>-1</code>を返します <br><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf</a></blockquote><p><br></p><pre><code class="hljs">item.<span class="hljs-keyword">to</span><span class="hljs-constructor">UpperCase()</span>.index<span class="hljs-constructor">Of(<span class="hljs-params">value</span>.<span class="hljs-params">toUpperCase</span>()</span>) !== -<span class="hljs-number">1</span></code></pre><p><br>値が見つからなければ <code>-1</code>を返すという特性を使って、記事のタイトルやカテゴリーにユーザーの入力値を含んでいれば <code> true</code> 、含まなければ <code>false</code> を返すようにしています。<br><br>以上のステップを経て、以下のコードで検索キーワードを含む値が1つでもある記事は <code>.length &gt; 0</code> の結果 <em>true</em>が返り、<code>serchedPosts</code>に格納されます。    </p><pre><code class="hljs"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Object</span>.</span></span>values(member).filter(
<span class="hljs-function">&nbsp;(<span class="hljs-params">item</span>: <span class="hljs-params">string</span>) =&gt;</span>
&nbsp;&nbsp;item !== undefined<span class="hljs-operator"> &amp;&amp;
&nbsp;&nbsp;</span>item !== null<span class="hljs-operator"> &amp;&amp;
&nbsp;&nbsp;</span>item.<span class="hljs-keyword">to</span><span class="hljs-constructor">UpperCase()</span>.index<span class="hljs-constructor">Of(<span class="hljs-params">value</span>.<span class="hljs-params">toUpperCase</span>()</span>) !== -<span class="hljs-number">1</span>
).length &gt; <span class="hljs-number">0</span></code></pre><p><br>あとはこの<code>serchedPosts</code>を画面に表示するだけです。  <br></p><h2 id="h1afe451c43">さいごに</h2><p>Setオブジェクト、fileterメソッド、indexOfメソッド、toUpperCaseメソッドなど、JavaScriptの持つメソッドについても勉強になりました。<br><br>組み込み関数を一通りチラッとでも知っていれば、何かを実装したい時にあれを使えばできそう…って考えられると思うので、元々用意されている関数なんかの知識は増やしていきたいなと思います。<br><br></p><h2 id="he45680f0bc">参考記事</h2><p><br><a href="https://himenon.github.io/docs/javascript/simple-react-local-search-form/" target="_blank" rel="noopener noreferrer">https://himenon.github.io/docs/javascript/simple-react-local-search-form/</a><br><br><a href="https://qiita.com/takf-jp/items/af10bc05428b1182ece5" target="_blank" rel="noopener noreferrer">https://qiita.com/takf-jp/items/af10bc05428b1182ece5</a><br></p></body></html></div></div></div><style data-emotion="css 2sbw87">.css-2sbw87{background-color:#494949;margin:0 auto;padding-top:30px;padding-bottom:30px;color:#f2f2f2;letter-spacing:0.08rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-around;-ms-flex-pack:space-around;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}</style><div class="css-2sbw87"><style data-emotion="css kta5xp">.css-kta5xp{box-sizing:border-box;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:83.333333%;-ms-flex-preferred-size:83.333333%;flex-basis:83.333333%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:83.333333%;}@media (min-width:600px){.css-kta5xp{-webkit-flex-basis:83.333333%;-ms-flex-preferred-size:83.333333%;flex-basis:83.333333%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:83.333333%;}}@media (min-width:900px){.css-kta5xp{-webkit-flex-basis:66.666667%;-ms-flex-preferred-size:66.666667%;flex-basis:66.666667%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:66.666667%;}}@media (min-width:1200px){.css-kta5xp{-webkit-flex-basis:66.666667%;-ms-flex-preferred-size:66.666667%;flex-basis:66.666667%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:66.666667%;}}@media (min-width:1536px){.css-kta5xp{-webkit-flex-basis:66.666667%;-ms-flex-preferred-size:66.666667%;flex-basis:66.666667%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:66.666667%;}}</style><div class="MuiGrid-root MuiGrid-grid-xs-10 MuiGrid-grid-md-8 css-kta5xp"><style data-emotion="css 1lx0lai">.css-1lx0lai{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;text-align:center;}</style><div class="MuiGrid-root MuiGrid-item css-1lx0lai"><a href="https://twitter.com/napi_nami"><style data-emotion="css 1ea777n">.css-1ea777n{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;margin:8px;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1ea777n" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TwitterIcon"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg></a><a href="https://github.com/hinakonagao"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-1ea777n" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="GitHubIcon"><path d="M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"></path></svg></a></div><style data-emotion="css 198jr53">.css-198jr53{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;text-align:center;font-weight:200;}</style><p class="MuiTypography-root MuiTypography-body2 css-198jr53">© 2022 hinako blog</p></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"blog":{"id":"react-serch","createdAt":"2022-01-06T00:15:53.503Z","updatedAt":"2022-02-12T11:40:50.275Z","publishedAt":"2022-02-06T00:15:53.000Z","revisedAt":"2022-02-12T11:40:50.275Z","title":"Reactでリアルタイムの検索機能を実装する","body":"\u003cp\u003e個人ブログサイトを作った際、記事一覧画面にキーワード検索やカテゴリーで絞り込む機能を実装しました。\u003cbr\u003e\u003cbr\u003eAPIから取得したコンテンツなどフロントエンドで保持しているデータに対して絞り込みを行う機能は色んな場面で使えるかなと思うので、そのロジックと具体的な実装方法をまとめておきます。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h652c073a9b\"\u003e基本的なロジック\u003c/h2\u003e\u003cp\u003e\u003cbr\u003eデータの絞り込みを行う基本的なロジックは、JavaScriptの組み込み関数の\u003ccode\u003efitler\u003c/code\u003e  を利用した\u003cstrong\u003e配列操作\u003c/strong\u003eです。\u003cbr\u003e\u003c/p\u003e\u003cblockquote\u003e\u003ccode\u003e filter()\u003c/code\u003eメソッドは、与えられた関数によって実装されたテストに合格したすべての配列からなる\u003cstrong\u003e新しい配列を生成\u003c/strong\u003eします。\u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003e\u003ca style=\"background-color:#ffffff\" href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e[\"りんご\", \"みかん\", \"いちご\"].filter((text) =\u0026gt; {\n\u0026nbsp;return text !== \"りんご\";\n});\n\n// #=\u0026gt; [\"みかん\", \"いちご\"];\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003efilterメソッドを使ってReactで検索機能を実装する流れは以下の通りです。\u003cbr\u003e\u003c/p\u003e\u003col\u003e\u003cli\u003eユーザーから検索条件を受け取る。（キーワードの入力、カテゴリーの選択など）\u003c/li\u003e\u003cli\u003e全てのデータが入った配列に対して、filterメソッドにより1.で受け取った検索条件に合致するデータのみを選別して新しい配列を生成する。\u003c/li\u003e\u003cli\u003e2.で生成された配列の中身を画面に一覧表示する。\u003c/li\u003e\u003c/ol\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hb4d7d075a8\"\u003e検索機能の実装例\u003c/h2\u003e\u003cp\u003e\u003cbr\u003e以下のURLはこれから説明する検索機能を実装したサンプルコードです。\u003cbr\u003e\u003cbr\u003eサンプルコードにある、\u003ccode\u003e①カテゴリー選択ボタンによる検索\u003c/code\u003e と\u003ccode\u003e②フリーキーワード検索\u003c/code\u003eについて解説していきます。 \u003cbr\u003e\u003c/p\u003e\u003ciframe class=\"embedly-embed\" src=\"https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fc93jo\u0026display_name=CodeSandbox\u0026url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fc93jo\u0026image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fc93jo%2Fscreenshot.png\u0026key=94335756f04b424b8ce3ce71cbe3de0a\u0026type=text%2Fhtml\u0026schema=codesandbox\" width=\"1000\" height=\"500\" scrolling=\"no\" title=\"CodeSandbox embed\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen=\"true\"\u003e\u003c/iframe\u003e\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/react-serch-c93jo?file=/src/App.js\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://codesandbox.io/s/react-serch-c93jo?file=/src/App.js\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e実際のWebサービスでは、ブログ記事のデータはAPIから受け取ることが多いかと思いますが、今回は予め \u003ccode\u003eposts\u003c/code\u003e という配列で記事データを用意し、フロント側で保持しておきます。\u003cbr\u003e\u003cbr\u003e【検索対象とする記事データ】\u003c/p\u003e\u003cpre\u003e\u003ccode\u003econst posts = [\n\u0026nbsp;{\n\u0026nbsp;\u0026nbsp;title: 'useStateの使い方',\n\u0026nbsp;\u0026nbsp;category: 'React'\n\u0026nbsp;},\n\u0026nbsp;{\n\u0026nbsp;\u0026nbsp;title: 'LaravelのMVCモデルについて',\n\u0026nbsp;\u0026nbsp;category: 'Laravel'\n\u0026nbsp;},\n\u0026nbsp;{\n\u0026nbsp;\u0026nbsp;title: '同一オリジンポリシーとCORS',\n\u0026nbsp;\u0026nbsp;category: 'Web'\n\u0026nbsp;},\n\u0026nbsp;{\n\u0026nbsp;\u0026nbsp;title: 'useEffectの使い方',\n\u0026nbsp;\u0026nbsp;category: 'React'\n\u0026nbsp;}\n]\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eそして、画面に表示する記事データを管理するための状態変数 \u003ccode\u003eshowPosts\u003c/code\u003e  を用意し、\u003ccode\u003eshowPosts\u003c/code\u003eの記事を一覧表示します。 \u003cbr\u003e\u003ccode\u003eshowPosts\u003c/code\u003eの初期値には、上記の\u003ccode\u003eposts\u003c/code\u003eを入れておきます。   \u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eexport default function App() {\n\u0026nbsp;const [showPosts, setShowPosts] = useState(posts);\n\n\u0026nbsp;return (\n\u0026nbsp;\u0026nbsp;\u0026lt;div className=\"App\"\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;h1\u0026gt;記事一覧\u0026lt;/h1\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{showPosts.map((post, index) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;return (\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;div key={post.title}\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;p\u0026gt;{index+1}. {post.title}\u0026lt;/p\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;p\u0026gt;category：{post.category}\u0026lt;/p\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;/div\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;})}\n\u0026nbsp;\u0026nbsp;\u0026lt;/div\u0026gt;\n\u0026nbsp;);\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eブラウザに表示すると以下の通りです。\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/4218f0d2e06447bcaad24ed417b5c3a9/blogs.png\" alt=\"\"\u003e\u003cbr\u003eこの記事一覧に対して絞り込みを行っていきます。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hc8bb7fb60d\"\u003e①カテゴリー選択ボタンによる検索\u003c/h2\u003e\u003cp\u003eまずは、カテゴリー選択ボタンでカテゴリーを絞り込む機能を実装してみます。\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h2661198b93\"\u003e実装手順\u003c/h3\u003e\u003cp\u003e1. カテゴリーリストの配列を作成\u003cbr\u003e2. カテゴリー選択ボタンを設置\u003cbr\u003e3. \u003ccode\u003eonClick\u003c/code\u003e時に実行して絞り込み処理を行う\u003ccode\u003eselectCategory\u003c/code\u003eメソッドを定義   \u003cbr\u003e\u003cbr\u003e実装したコードはこちらです。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eexport default function App() {\n\n\u0026nbsp;const [showPosts, setShowPosts] = useState(posts);\n\n\u0026nbsp;// カテゴリーリスト\n\u0026nbsp;const categories = Array.from(new Set(posts.map((post) =\u0026gt; post.category)));\n\t\n\u0026nbsp;// カテゴリー絞り込み\n\u0026nbsp;const selectCategory = (category) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;// allを選択した場合は早期return\n\u0026nbsp;\u0026nbsp;if (category === \"all\") {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;setShowPosts(posts);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;return;\n\u0026nbsp;\u0026nbsp;}\n\n\u0026nbsp;\u0026nbsp;const selectedPosts = posts.filter((post) =\u0026gt; post.category === category);\n\u0026nbsp;\u0026nbsp;setShowPosts(selectedPosts);\n\u0026nbsp;};\n\u0026nbsp;\u0026nbsp;\n\n\u0026nbsp;return (\n\u0026nbsp;\u0026nbsp;\u0026lt;div className=\"App\"\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;h1\u0026gt;記事一覧\u0026lt;/h1\u0026gt;\n\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{/* カテゴリー選択ボタン */}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;div\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;h4\u0026gt;Category：\u0026lt;/h4\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;button onClick={() =\u0026gt; selectCategory(\"all\")}\u0026gt;All\u0026lt;/button\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;{categories.map((category) =\u0026gt; (\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;button onClick={() =\u0026gt; selectCategory(category)}\u0026gt;{category}\u0026lt;/button\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;))}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;/div\u0026gt;\n\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{showPosts.map((post, index) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;return (\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;div key={post.title}\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;p\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;{index + 1}. {post.title}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;/p\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;p\u0026gt;category：{post.category}\u0026lt;/p\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;/div\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;})}\n\u0026nbsp;\u0026nbsp;\u0026lt;/div\u0026gt;\n\u0026nbsp;);\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h8a50fc5ec1\"\u003eポイント解説\u003c/h3\u003e\u003cp\u003e\u003cbr\u003eひとつずつ解説します。\u003cbr\u003e\u003cbr\u003e\u003cstrong\u003e1.カテゴリーリストの配列を作成\u003c/strong\u003e \u003cbr\u003e\u003ccode\u003eposts\u003c/code\u003e配列に記事が存在するカテゴリーの分だけカテゴリー選択ボタンを設置したいので、まずはカテゴリーのリストを作成します。  \u003c/p\u003e\u003cpre\u003e\u003ccode\u003e// カテゴリーリスト\nconst categories = Array.from(new Set(posts.map((post) =\u0026gt; post.category)));\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eJavaScriptの\u003ccode\u003eSetオブジェクト\u003c/code\u003eを使って、\u003ccode\u003eposts\u003c/code\u003e  に存在するカテゴリーを\u003cstrong\u003e 重複排除\u003c/strong\u003eして格納したカテゴリーリストを作っています。 \u003cbr\u003eSetオブジェクトについては以下の記事を参考にしました。\u003cbr\u003e\u003ca href=\"https://qiita.com/netebakari/items/7c1db0b0cea14a3d4419\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://qiita.com/netebakari/items/7c1db0b0cea14a3d4419\u003c/a\u003e\u003cbr\u003e\u003cbr\u003eSetオブジェクトはES2015から導入された機能で、重複した値が無いことを保証してくれます。\u003c/p\u003e\u003cblockquote\u003e Setオブジェクトは値のコレクションです。挿入順に要素を反復することができます。Setに\u003cstrong\u003e重複する値は格納出来ません\u003c/strong\u003e。Set内の値はコレクション内で一意となります。\u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Set\"\u003e\u0026nbsp;\u003c/a\u003e\u003ca href=\"unsafe:[object Object]\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Set\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003e\u003cbr\u003e\u003cstrong\u003e2.　カテゴリー選択ボタンを設置\u003c/strong\u003e \u003cbr\u003e各カテゴリーを選択するボタンと、全ての記事を表示するためのAllボタンを作ります。\u003cbr\u003e\u003cbr\u003e1.で作成したカテゴリーリストの分だけカテゴリー選択ボタンを設置します。\u003cbr\u003e\u003cbr\u003eカテゴリー選択ボタンとAllボタンの\u003ccode\u003eonClick\u003c/code\u003e時には\u003ccode\u003eselectCategory\u003c/code\u003eメソッドを実行し、引数には該当のカテゴリーを渡しています。   \u003c/p\u003e\u003cpre\u003e\u003ccode\u003e\u0026lt;button onClick={() =\u0026gt; selectCategory(\"all\")}\u0026gt;All\u0026lt;/button\u0026gt;\n{categories.map((category) =\u0026gt; (\n\u0026nbsp;\u0026nbsp;\u0026lt;button onClick={() =\u0026gt; selectCategory(category)}\u0026gt;{category}\u0026lt;/button\u0026gt;\n))}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003cstrong\u003e3.　onClick時に実行するselectCategoryメソッドを定義\u003c/strong\u003e \u003cbr\u003e\u003ccode\u003eposts\u003c/code\u003eの中から、選択されたカテゴリーと一致するカテゴリーの記事のみを\u003ccode\u003efilter\u003c/code\u003eメソッドで選別しています。   \u003cbr\u003e\u003cbr\u003e絞り込み後の配列を、一覧表示に使う状態変数\u003ccode\u003eshowPosts\u003c/code\u003eにセットしています。  \u003c/p\u003e\u003cpre\u003e\u003ccode\u003econst selectCategory = (category) =\u0026gt; {\n\u0026nbsp;// allの場合は早期return\n\u0026nbsp;if (category === \"all\") {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;setShowPosts(posts);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;return;\n\u0026nbsp;}\n\u0026nbsp;const selectedPosts = posts.filter((post) =\u0026gt; post.category === category);\n\u0026nbsp;setShowPosts(selectedPosts);\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h9f9b4f1e4a\"\u003e②フリーキーワード\u003c/h2\u003e\u003cp\u003e\u003cbr\u003e次に、ユーザーの入力値による絞り込み（フリーキーワード検索）の機能を実装してみます。\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h2661198b93\"\u003e実装手順\u003c/h3\u003e\u003cp\u003e\u003cbr\u003e1. 検索フォームへの入力値を保持する状態変数\u003ccode\u003einputValue\u003c/code\u003eを定義  \u003cbr\u003e2. フリーキーワード検索フォームを設置\u003cbr\u003e3. 検索フォームの\u003ccode\u003eonChange\u003c/code\u003e時に実行する\u003ccode\u003ehandleInputChange\u003c/code\u003eメソッドを定義   \u003cbr\u003e4. 検索フォームへの入力値が変わる度に実行して絞り込みを行う\u003ccode\u003esearch\u003c/code\u003eメソッドを定義  \u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eexport default function App() {\n\u0026nbsp;const [showPosts, setShowPosts] = useState(posts)\n\u0026nbsp;const [inputValue, setInputValue] = useState()\n\n\u0026nbsp;// 検索欄への入力値をハンドリング\n\u0026nbsp;const handleInputChange = (e) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;setInputValue(e.target.value)\n\u0026nbsp;\u0026nbsp;search(e.target.value)\n\u0026nbsp;}\n\n\u0026nbsp;// 検索欄への入力値での絞り込み\n\u0026nbsp;const search = (value) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;// 検索欄への入力が空の場合は早期return\n\u0026nbsp;\u0026nbsp;if (value === \"\") {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;setShowPosts(posts);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;return;\n\u0026nbsp;\u0026nbsp;}\n\n\u0026nbsp;\u0026nbsp;const serchedPosts = posts.filter(\n\u0026nbsp;\u0026nbsp;\u0026nbsp;(post) =\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Object.values(post).filter(\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;(item) =\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item !== undefined \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item !== null \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item.toUpperCase().indexOf(value.toUpperCase()) !== -1\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;).length \u0026gt; 0\n\u0026nbsp;\u0026nbsp;);\n\n\u0026nbsp;\u0026nbsp;setShowPosts(serchedPosts);\n\u0026nbsp;}\n\n\u0026nbsp;return (\n\u0026nbsp;\u0026nbsp;\u0026lt;div className=\"App\"\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;h1\u0026gt;記事一覧\u0026lt;/h1\u0026gt;\n\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{/* フリーキーワード検索フォーム */}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;div\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;h4\u0026gt;Search\u0026lt;/h4\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;input type=\"text\" value={inputValue} onChange={handleInputChange} /\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;/div\u0026gt;\n\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{/* 記事一覧表示 */}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{showPosts.map((post, index) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;return (\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;div key={post.title}\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;p\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;{index + 1}. {post.title}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;/p\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;p\u0026gt;category：{post.category}\u0026lt;/p\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026lt;/div\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;})}\n\u0026nbsp;\u0026nbsp;\u0026lt;/div\u0026gt;\n\u0026nbsp;);\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h8a50fc5ec1\"\u003eポイント解説\u003c/h3\u003e\u003cp\u003e\u003cbr\u003e大体はReactの基本の知識でカバーできるかと思います。\u003cbr\u003e\u003cbr\u003e4.の絞り込みを行うロジックの部分は一見ややこしいですが、一つずつ読み解いて解説していきます。\u003cbr\u003e\u003cbr\u003e記事の絞り込みを行っているのは以下の部分です。\u003c/p\u003e\u003cpre\u003e\u003ccode\u003econst serchedPosts = posts.filter(\n\u0026nbsp;(post) =\u0026gt;\n\u0026nbsp;\u0026nbsp;Object.values(post).filter(\n\u0026nbsp;\u0026nbsp;\u0026nbsp;(item) =\u0026gt;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item !== undefined \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item !== null \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item.toUpperCase().indexOf(value.toUpperCase()) !== -1\n\u0026nbsp;\u0026nbsp;).length \u0026gt; 0\n)\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eこのコードでは、\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eタイトルもしくはカテゴリーの\u003cstrong\u003eいずれか\u003c/strong\u003eにユーザーの入力値を\u003cstrong\u003e含む\u003c/strong\u003e（全一致ではない） \u003c/li\u003e\u003cli\u003e大文字小文字の違いは許容 \u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003eという要件で絞り込んでいます。\u003cbr\u003e\u003cbr\u003e要点を解説していきます。\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e \u003cstrong\u003eObject.values()\u003c/strong\u003e \u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode\u003eObject.values(post)\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e上記の部分で、オブジェクトの\u003cstrong\u003eプロパティの値を配列で取得\u003c/strong\u003eする`Object.values()`メソッドを使い、検索対象の値を格納した配列を作ります。 \u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/values\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/values\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e \u003cstrong\u003eundefinedとnullを除外\u003c/strong\u003e \u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode\u003eitem !== undefined \u0026amp;\u0026amp;\nitem !== null \u0026amp;\u0026amp;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e次に出てくる\u003ccode\u003etoUpperCase()\u003c/code\u003eは\u003ccode\u003enull\u003c/code\u003eや\u003ccode\u003eundefined\u003c/code\u003eの値に対しては使えません。    \u003cbr\u003e\u003cbr\u003eなので仮にこの2行が無いと、\u003ccode\u003eObect.values(post)\u003c/code\u003eで生成された配列の中に\u003ccode\u003eundefined\u003c/code\u003eもしくは\u003ccode\u003enull\u003c/code\u003eがあった場合 \u003ccode\u003eCannot read properties of null (reading 'toUpperCase')\u003c/code\u003e というエラーが出ます。     \u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e \u003cstrong\u003etoUpperCase()\u003c/strong\u003e \u003c/li\u003e\u003c/ul\u003e\u003cblockquote\u003e\u003cstrong\u003etoUpperCase()\u003c/strong\u003eメソッドは、呼び出す文字列の値を（文字列でない場合、文字列に変換して）大文字に変換して返します。\u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase\"\u003e\u0026nbsp;https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003e\u003cbr\u003e\u003cstrong\u003e記事のタイトルとカテゴリー\u003c/strong\u003eと、\u003cstrong\u003eユーザーの入力値\u003c/strong\u003e の双方を大文字に変換することで、\u003cstrong\u003e大文字・小文字の違いは許容\u003c/strong\u003eします。  \u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e \u003cstrong\u003eindexOf()\u003c/strong\u003e\u003c/li\u003e\u003c/ul\u003e\u003cblockquote\u003e\u003cstrong\u003eindexOf()\u003c/strong\u003eメソッドは、呼び出す\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eString\u003c/a\u003eオブジェクト中で、 \u003ccode\u003efromIndex\u003c/code\u003e   から検索を始め、指定された値が最初に現れたインデックスを返します。値が見つからない場合は\u0026nbsp;\u003ccode\u003e-1\u003c/code\u003eを返します \u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eitem.toUpperCase().indexOf(value.toUpperCase()) !== -1\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e値が見つからなければ \u003ccode\u003e-1\u003c/code\u003eを返すという特性を使って、記事のタイトルやカテゴリーにユーザーの入力値を含んでいれば \u003ccode\u003e true\u003c/code\u003e 、含まなければ \u003ccode\u003efalse\u003c/code\u003e を返すようにしています。\u003cbr\u003e\u003cbr\u003e以上のステップを経て、以下のコードで検索キーワードを含む値が1つでもある記事は \u003ccode\u003e.length \u0026gt; 0\u003c/code\u003e の結果 \u003cem\u003etrue\u003c/em\u003eが返り、\u003ccode\u003eserchedPosts\u003c/code\u003eに格納されます。    \u003c/p\u003e\u003cpre\u003e\u003ccode\u003eObject.values(member).filter(\n\u0026nbsp;(item: string) =\u0026gt;\n\u0026nbsp;\u0026nbsp;item !== undefined \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;item !== null \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;item.toUpperCase().indexOf(value.toUpperCase()) !== -1\n).length \u0026gt; 0\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eあとはこの\u003ccode\u003eserchedPosts\u003c/code\u003eを画面に表示するだけです。  \u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h1afe451c43\"\u003eさいごに\u003c/h2\u003e\u003cp\u003eSetオブジェクト、fileterメソッド、indexOfメソッド、toUpperCaseメソッドなど、JavaScriptの持つメソッドについても勉強になりました。\u003cbr\u003e\u003cbr\u003e組み込み関数を一通りチラッとでも知っていれば、何かを実装したい時にあれを使えばできそう…って考えられると思うので、元々用意されている関数なんかの知識は増やしていきたいなと思います。\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"he45680f0bc\"\u003e参考記事\u003c/h2\u003e\u003cp\u003e\u003cbr\u003e\u003ca href=\"https://himenon.github.io/docs/javascript/simple-react-local-search-form/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://himenon.github.io/docs/javascript/simple-react-local-search-form/\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003ca href=\"https://qiita.com/takf-jp/items/af10bc05428b1182ece5\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://qiita.com/takf-jp/items/af10bc05428b1182ece5\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e","tags":[{"id":"react","createdAt":"2022-01-07T13:17:54.189Z","updatedAt":"2022-02-12T02:31:51.382Z","publishedAt":"2022-01-07T13:17:54.189Z","revisedAt":"2022-01-07T13:17:54.189Z","tag":"React"}],"image":"react2"},"highlightedBody":"\u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003cp\u003e個人ブログサイトを作った際、記事一覧画面にキーワード検索やカテゴリーで絞り込む機能を実装しました。\u003cbr\u003e\u003cbr\u003eAPIから取得したコンテンツなどフロントエンドで保持しているデータに対して絞り込みを行う機能は色んな場面で使えるかなと思うので、そのロジックと具体的な実装方法をまとめておきます。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h652c073a9b\"\u003e基本的なロジック\u003c/h2\u003e\u003cp\u003e\u003cbr\u003eデータの絞り込みを行う基本的なロジックは、JavaScriptの組み込み関数の\u003ccode\u003efitler\u003c/code\u003e  を利用した\u003cstrong\u003e配列操作\u003c/strong\u003eです。\u003cbr\u003e\u003c/p\u003e\u003cblockquote\u003e\u003ccode\u003e filter()\u003c/code\u003eメソッドは、与えられた関数によって実装されたテストに合格したすべての配列からなる\u003cstrong\u003e新しい配列を生成\u003c/strong\u003eします。\u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003e\u003ca style=\"background-color:#ffffff\" href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e[\u003cspan class=\"hljs-string\"\u003e\"りんご\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"みかん\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"いちご\"\u003c/span\u003e].\u003cspan class=\"hljs-built_in\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e !== \u003cspan class=\"hljs-string\"\u003e\"りんご\"\u003c/span\u003e;\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// #=\u0026gt; [\"みかん\", \"いちご\"];\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003efilterメソッドを使ってReactで検索機能を実装する流れは以下の通りです。\u003cbr\u003e\u003c/p\u003e\u003col\u003e\u003cli\u003eユーザーから検索条件を受け取る。（キーワードの入力、カテゴリーの選択など）\u003c/li\u003e\u003cli\u003e全てのデータが入った配列に対して、filterメソッドにより1.で受け取った検索条件に合致するデータのみを選別して新しい配列を生成する。\u003c/li\u003e\u003cli\u003e2.で生成された配列の中身を画面に一覧表示する。\u003c/li\u003e\u003c/ol\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hb4d7d075a8\"\u003e検索機能の実装例\u003c/h2\u003e\u003cp\u003e\u003cbr\u003e以下のURLはこれから説明する検索機能を実装したサンプルコードです。\u003cbr\u003e\u003cbr\u003eサンプルコードにある、\u003ccode\u003e①カテゴリー選択ボタンによる検索\u003c/code\u003e と\u003ccode\u003e②フリーキーワード検索\u003c/code\u003eについて解説していきます。 \u003cbr\u003e\u003c/p\u003e\u003ciframe class=\"embedly-embed\" src=\"https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fc93jo\u0026amp;display_name=CodeSandbox\u0026amp;url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fc93jo\u0026amp;image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fc93jo%2Fscreenshot.png\u0026amp;key=94335756f04b424b8ce3ce71cbe3de0a\u0026amp;type=text%2Fhtml\u0026amp;schema=codesandbox\" width=\"1000\" height=\"500\" scrolling=\"no\" title=\"CodeSandbox embed\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen=\"true\"\u003e\u003c/iframe\u003e\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/react-serch-c93jo?file=/src/App.js\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://codesandbox.io/s/react-serch-c93jo?file=/src/App.js\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e実際のWebサービスでは、ブログ記事のデータはAPIから受け取ることが多いかと思いますが、今回は予め \u003ccode\u003eposts\u003c/code\u003e という配列で記事データを用意し、フロント側で保持しておきます。\u003cbr\u003e\u003cbr\u003e【検索対象とする記事データ】\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003econst posts = [\n\u0026nbsp;{\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'useStateの使い方'\u003c/span\u003e,\n\u0026nbsp;\u0026nbsp;category: \u003cspan class=\"hljs-string\"\u003e'React'\u003c/span\u003e\n\u0026nbsp;},\n\u0026nbsp;{\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'LaravelのMVCモデルについて'\u003c/span\u003e,\n\u0026nbsp;\u0026nbsp;category: \u003cspan class=\"hljs-string\"\u003e'Laravel'\u003c/span\u003e\n\u0026nbsp;},\n\u0026nbsp;{\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'同一オリジンポリシーとCORS'\u003c/span\u003e,\n\u0026nbsp;\u0026nbsp;category: \u003cspan class=\"hljs-string\"\u003e'Web'\u003c/span\u003e\n\u0026nbsp;},\n\u0026nbsp;{\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'useEffectの使い方'\u003c/span\u003e,\n\u0026nbsp;\u0026nbsp;category: \u003cspan class=\"hljs-string\"\u003e'React'\u003c/span\u003e\n\u0026nbsp;}\n]\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eそして、画面に表示する記事データを管理するための状態変数 \u003ccode\u003eshowPosts\u003c/code\u003e  を用意し、\u003ccode\u003eshowPosts\u003c/code\u003eの記事を一覧表示します。 \u003cbr\u003e\u003ccode\u003eshowPosts\u003c/code\u003eの初期値には、上記の\u003ccode\u003eposts\u003c/code\u003eを入れておきます。   \u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [showPosts, setShowPosts] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(posts);\n\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"App\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e記事一覧\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{showPosts.map((post, index) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;return (\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{post.title}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e{index+1}. {post.title}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003ecategory：{post.category}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;})}\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u0026nbsp;);\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eブラウザに表示すると以下の通りです。\u003cbr\u003e\u003cimg src=\"https://images.microcms-assets.io/assets/bb9889e81cb24134954870eb1f2ba680/4218f0d2e06447bcaad24ed417b5c3a9/blogs.png\" alt=\"\"\u003e\u003cbr\u003eこの記事一覧に対して絞り込みを行っていきます。\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"hc8bb7fb60d\"\u003e①カテゴリー選択ボタンによる検索\u003c/h2\u003e\u003cp\u003eまずは、カテゴリー選択ボタンでカテゴリーを絞り込む機能を実装してみます。\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h2661198b93\"\u003e実装手順\u003c/h3\u003e\u003cp\u003e1. カテゴリーリストの配列を作成\u003cbr\u003e2. カテゴリー選択ボタンを設置\u003cbr\u003e3. \u003ccode\u003eonClick\u003c/code\u003e時に実行して絞り込み処理を行う\u003ccode\u003eselectCategory\u003c/code\u003eメソッドを定義   \u003cbr\u003e\u003cbr\u003e実装したコードはこちらです。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [showPosts, setShowPosts] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(posts);\n\n\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// カテゴリーリスト\u003c/span\u003e\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e categories = \u003cspan class=\"hljs-title class_\"\u003eArray\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efrom\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSet\u003c/span\u003e(posts.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003epost\u003c/span\u003e) =\u0026gt;\u003c/span\u003e post.\u003cspan class=\"hljs-property\"\u003ecategory\u003c/span\u003e)));\n\t\n\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// カテゴリー絞り込み\u003c/span\u003e\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eselectCategory\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003ecategory\u003c/span\u003e) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// allを選択した場合は早期return\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (category === \u003cspan class=\"hljs-string\"\u003e\"all\"\u003c/span\u003e) {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-title function_\"\u003esetShowPosts\u003c/span\u003e(posts);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n\u0026nbsp;\u0026nbsp;}\n\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e selectedPosts = posts.\u003cspan class=\"hljs-title function_\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003epost\u003c/span\u003e) =\u0026gt;\u003c/span\u003e post.\u003cspan class=\"hljs-property\"\u003ecategory\u003c/span\u003e === category);\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-title function_\"\u003esetShowPosts\u003c/span\u003e(selectedPosts);\n\u0026nbsp;};\n\u0026nbsp;\u0026nbsp;\n\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"App\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e記事一覧\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{/* カテゴリー選択ボタン */}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003eCategory：\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e selectCategory(\"all\")}\u0026gt;All\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;{categories.map((category) =\u0026gt; (\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e selectCategory(category)}\u0026gt;{category}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;))}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{showPosts.map((post, index) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;return (\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{post.title}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;{index + 1}. {post.title}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003ecategory：{post.category}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;})}\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u0026nbsp;);\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h8a50fc5ec1\"\u003eポイント解説\u003c/h3\u003e\u003cp\u003e\u003cbr\u003eひとつずつ解説します。\u003cbr\u003e\u003cbr\u003e\u003cstrong\u003e1.カテゴリーリストの配列を作成\u003c/strong\u003e \u003cbr\u003e\u003ccode\u003eposts\u003c/code\u003e配列に記事が存在するカテゴリーの分だけカテゴリー選択ボタンを設置したいので、まずはカテゴリーのリストを作成します。  \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e カテゴリーリスト\nconst categories = \u003cspan class=\"hljs-built_in\"\u003eArray\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eSet\u003c/span\u003e(posts.map(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003e(post)\u003c/span\u003e =\u0026gt;\u003c/span\u003e post.category)));\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eJavaScriptの\u003ccode\u003eSetオブジェクト\u003c/code\u003eを使って、\u003ccode\u003eposts\u003c/code\u003e  に存在するカテゴリーを\u003cstrong\u003e 重複排除\u003c/strong\u003eして格納したカテゴリーリストを作っています。 \u003cbr\u003eSetオブジェクトについては以下の記事を参考にしました。\u003cbr\u003e\u003ca href=\"https://qiita.com/netebakari/items/7c1db0b0cea14a3d4419\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://qiita.com/netebakari/items/7c1db0b0cea14a3d4419\u003c/a\u003e\u003cbr\u003e\u003cbr\u003eSetオブジェクトはES2015から導入された機能で、重複した値が無いことを保証してくれます。\u003c/p\u003e\u003cblockquote\u003e Setオブジェクトは値のコレクションです。挿入順に要素を反復することができます。Setに\u003cstrong\u003e重複する値は格納出来ません\u003c/strong\u003e。Set内の値はコレクション内で一意となります。\u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Set\"\u003e\u0026nbsp;\u003c/a\u003e\u003ca href=\"unsafe:[object Object]\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Set\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003e\u003cbr\u003e\u003cstrong\u003e2.　カテゴリー選択ボタンを設置\u003c/strong\u003e \u003cbr\u003e各カテゴリーを選択するボタンと、全ての記事を表示するためのAllボタンを作ります。\u003cbr\u003e\u003cbr\u003e1.で作成したカテゴリーリストの分だけカテゴリー選択ボタンを設置します。\u003cbr\u003e\u003cbr\u003eカテゴリー選択ボタンとAllボタンの\u003ccode\u003eonClick\u003c/code\u003e時には\u003ccode\u003eselectCategory\u003c/code\u003eメソッドを実行し、引数には該当のカテゴリーを渡しています。   \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u0026lt;\u003cspan class=\"hljs-keyword\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eonClick\u003c/span\u003e={() =\u0026gt; selectCategory(\u003cspan class=\"hljs-string\"\u003e\"all\"\u003c/span\u003e)}\u0026gt;All\u0026lt;/\u003cspan class=\"hljs-keyword\"\u003ebutton\u003c/span\u003e\u0026gt;\n{categories.map((category) =\u0026gt; (\n\u0026nbsp;\u0026nbsp;\u0026lt;\u003cspan class=\"hljs-keyword\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eonClick\u003c/span\u003e={() =\u0026gt; selectCategory(category)}\u0026gt;{category}\u0026lt;/\u003cspan class=\"hljs-keyword\"\u003ebutton\u003c/span\u003e\u0026gt;\n))}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003cstrong\u003e3.　onClick時に実行するselectCategoryメソッドを定義\u003c/strong\u003e \u003cbr\u003e\u003ccode\u003eposts\u003c/code\u003eの中から、選択されたカテゴリーと一致するカテゴリーの記事のみを\u003ccode\u003efilter\u003c/code\u003eメソッドで選別しています。   \u003cbr\u003e\u003cbr\u003e絞り込み後の配列を、一覧表示に使う状態変数\u003ccode\u003eshowPosts\u003c/code\u003eにセットしています。  \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003econst selectCategory \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e (category) \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u0026gt; {\n\u0026nbsp;// allの場合は早期return\n\u0026nbsp;if (category \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"all\"\u003c/span\u003e) {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;setShowPosts(posts)\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;return\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\u0026nbsp;}\n\u0026nbsp;const selectedPosts \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e posts.filter((post) \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u0026gt; post.category \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e category)\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\u0026nbsp;setShowPosts(selectedPosts)\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h9f9b4f1e4a\"\u003e②フリーキーワード\u003c/h2\u003e\u003cp\u003e\u003cbr\u003e次に、ユーザーの入力値による絞り込み（フリーキーワード検索）の機能を実装してみます。\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h2661198b93\"\u003e実装手順\u003c/h3\u003e\u003cp\u003e\u003cbr\u003e1. 検索フォームへの入力値を保持する状態変数\u003ccode\u003einputValue\u003c/code\u003eを定義  \u003cbr\u003e2. フリーキーワード検索フォームを設置\u003cbr\u003e3. 検索フォームの\u003ccode\u003eonChange\u003c/code\u003e時に実行する\u003ccode\u003ehandleInputChange\u003c/code\u003eメソッドを定義   \u003cbr\u003e4. 検索フォームへの入力値が変わる度に実行して絞り込みを行う\u003ccode\u003esearch\u003c/code\u003eメソッドを定義  \u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [showPosts, setShowPosts] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(posts)\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [inputValue, setInputValue] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e()\n\n\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// 検索欄への入力値をハンドリング\u003c/span\u003e\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandleInputChange\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003ee\u003c/span\u003e) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-title function_\"\u003esetInputValue\u003c/span\u003e(e.\u003cspan class=\"hljs-property\"\u003etarget\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e)\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-title function_\"\u003esearch\u003c/span\u003e(e.\u003cspan class=\"hljs-property\"\u003etarget\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e)\n\u0026nbsp;}\n\n\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// 検索欄への入力値での絞り込み\u003c/span\u003e\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esearch\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003evalue\u003c/span\u003e) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-comment\"\u003e// 検索欄への入力が空の場合は早期return\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (value === \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e) {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-title function_\"\u003esetShowPosts\u003c/span\u003e(posts);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n\u0026nbsp;\u0026nbsp;}\n\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e serchedPosts = posts.\u003cspan class=\"hljs-title function_\"\u003efilter\u003c/span\u003e(\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003epost\u003c/span\u003e) =\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003evalues\u003c/span\u003e(post).\u003cspan class=\"hljs-title function_\"\u003efilter\u003c/span\u003e(\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eitem\u003c/span\u003e) =\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item !== \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item !== \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item.\u003cspan class=\"hljs-title function_\"\u003etoUpperCase\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eindexOf\u003c/span\u003e(value.\u003cspan class=\"hljs-title function_\"\u003etoUpperCase\u003c/span\u003e()) !== -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;).\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;);\n\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-title function_\"\u003esetShowPosts\u003c/span\u003e(serchedPosts);\n\u0026nbsp;}\n\n\u0026nbsp;\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"App\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e記事一覧\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{/* フリーキーワード検索フォーム */}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003eSearch\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh4\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"text\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{inputValue}\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{handleInputChange}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{/* 記事一覧表示 */}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;{showPosts.map((post, index) =\u0026gt; {\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;return (\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{post.title}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;{index + 1}. {post.title}\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003ecategory：{post.category}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;);\n\u0026nbsp;\u0026nbsp;\u0026nbsp;})}\n\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u0026nbsp;);\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch3 id=\"h8a50fc5ec1\"\u003eポイント解説\u003c/h3\u003e\u003cp\u003e\u003cbr\u003e大体はReactの基本の知識でカバーできるかと思います。\u003cbr\u003e\u003cbr\u003e4.の絞り込みを行うロジックの部分は一見ややこしいですが、一つずつ読み解いて解説していきます。\u003cbr\u003e\u003cbr\u003e記事の絞り込みを行っているのは以下の部分です。\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003econst serchedPosts = posts.\u003cspan class=\"hljs-built_in\"\u003efilter\u003c/span\u003e(\n\u0026nbsp;\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003epost\u003c/span\u003e) =\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;Object.values(post).\u003cspan class=\"hljs-built_in\"\u003efilter\u003c/span\u003e(\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eitem\u003c/span\u003e) =\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item !== \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item !== \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;item.toUpperCase().\u003cspan class=\"hljs-built_in\"\u003eindexOf\u003c/span\u003e(value.toUpperCase()) !== \u003cspan class=\"hljs-number\"\u003e-1\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;).\u003cspan class=\"hljs-built_in\"\u003elength\u003c/span\u003e \u0026gt; \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n)\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eこのコードでは、\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eタイトルもしくはカテゴリーの\u003cstrong\u003eいずれか\u003c/strong\u003eにユーザーの入力値を\u003cstrong\u003e含む\u003c/strong\u003e（全一致ではない） \u003c/li\u003e\u003cli\u003e大文字小文字の違いは許容 \u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cbr\u003eという要件で絞り込んでいます。\u003cbr\u003e\u003cbr\u003e要点を解説していきます。\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e \u003cstrong\u003eObject.values()\u003c/strong\u003e \u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-keyword\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-keyword\"\u003evalues\u003c/span\u003e(post)\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e上記の部分で、オブジェクトの\u003cstrong\u003eプロパティの値を配列で取得\u003c/strong\u003eする`Object.values()`メソッドを使い、検索対象の値を格納した配列を作ります。 \u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/values\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/values\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e \u003cstrong\u003eundefinedとnullを除外\u003c/strong\u003e \u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003eitem !== undefined \u003cspan class=\"hljs-meta\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e\nitem !== \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e \u003cspan class=\"hljs-meta\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e次に出てくる\u003ccode\u003etoUpperCase()\u003c/code\u003eは\u003ccode\u003enull\u003c/code\u003eや\u003ccode\u003eundefined\u003c/code\u003eの値に対しては使えません。    \u003cbr\u003e\u003cbr\u003eなので仮にこの2行が無いと、\u003ccode\u003eObect.values(post)\u003c/code\u003eで生成された配列の中に\u003ccode\u003eundefined\u003c/code\u003eもしくは\u003ccode\u003enull\u003c/code\u003eがあった場合 \u003ccode\u003eCannot read properties of null (reading 'toUpperCase')\u003c/code\u003e というエラーが出ます。     \u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e \u003cstrong\u003etoUpperCase()\u003c/strong\u003e \u003c/li\u003e\u003c/ul\u003e\u003cblockquote\u003e\u003cstrong\u003etoUpperCase()\u003c/strong\u003eメソッドは、呼び出す文字列の値を（文字列でない場合、文字列に変換して）大文字に変換して返します。\u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase\"\u003e\u0026nbsp;https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003e\u003cbr\u003e\u003cstrong\u003e記事のタイトルとカテゴリー\u003c/strong\u003eと、\u003cstrong\u003eユーザーの入力値\u003c/strong\u003e の双方を大文字に変換することで、\u003cstrong\u003e大文字・小文字の違いは許容\u003c/strong\u003eします。  \u003cbr\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e \u003cstrong\u003eindexOf()\u003c/strong\u003e\u003c/li\u003e\u003c/ul\u003e\u003cblockquote\u003e\u003cstrong\u003eindexOf()\u003c/strong\u003eメソッドは、呼び出す\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String\" target=\"_blank\" rel=\"noopener noreferrer\"\u003eString\u003c/a\u003eオブジェクト中で、 \u003ccode\u003efromIndex\u003c/code\u003e   から検索を始め、指定された値が最初に現れたインデックスを返します。値が見つからない場合は\u0026nbsp;\u003ccode\u003e-1\u003c/code\u003eを返します \u003cbr\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003eitem.\u003cspan class=\"hljs-keyword\"\u003eto\u003c/span\u003e\u003cspan class=\"hljs-constructor\"\u003eUpperCase()\u003c/span\u003e.index\u003cspan class=\"hljs-constructor\"\u003eOf(\u003cspan class=\"hljs-params\"\u003evalue\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003etoUpperCase\u003c/span\u003e()\u003c/span\u003e) !== -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003e値が見つからなければ \u003ccode\u003e-1\u003c/code\u003eを返すという特性を使って、記事のタイトルやカテゴリーにユーザーの入力値を含んでいれば \u003ccode\u003e true\u003c/code\u003e 、含まなければ \u003ccode\u003efalse\u003c/code\u003e を返すようにしています。\u003cbr\u003e\u003cbr\u003e以上のステップを経て、以下のコードで検索キーワードを含む値が1つでもある記事は \u003ccode\u003e.length \u0026gt; 0\u003c/code\u003e の結果 \u003cem\u003etrue\u003c/em\u003eが返り、\u003ccode\u003eserchedPosts\u003c/code\u003eに格納されます。    \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-module-access\"\u003e\u003cspan class=\"hljs-module\"\u003e\u003cspan class=\"hljs-identifier\"\u003eObject\u003c/span\u003e.\u003c/span\u003e\u003c/span\u003evalues(member).filter(\n\u003cspan class=\"hljs-function\"\u003e\u0026nbsp;(\u003cspan class=\"hljs-params\"\u003eitem\u003c/span\u003e: \u003cspan class=\"hljs-params\"\u003estring\u003c/span\u003e) =\u0026gt;\u003c/span\u003e\n\u0026nbsp;\u0026nbsp;item !== undefined\u003cspan class=\"hljs-operator\"\u003e \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u003c/span\u003eitem !== null\u003cspan class=\"hljs-operator\"\u003e \u0026amp;\u0026amp;\n\u0026nbsp;\u0026nbsp;\u003c/span\u003eitem.\u003cspan class=\"hljs-keyword\"\u003eto\u003c/span\u003e\u003cspan class=\"hljs-constructor\"\u003eUpperCase()\u003c/span\u003e.index\u003cspan class=\"hljs-constructor\"\u003eOf(\u003cspan class=\"hljs-params\"\u003evalue\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003etoUpperCase\u003c/span\u003e()\u003c/span\u003e) !== -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n).length \u0026gt; \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eあとはこの\u003ccode\u003eserchedPosts\u003c/code\u003eを画面に表示するだけです。  \u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"h1afe451c43\"\u003eさいごに\u003c/h2\u003e\u003cp\u003eSetオブジェクト、fileterメソッド、indexOfメソッド、toUpperCaseメソッドなど、JavaScriptの持つメソッドについても勉強になりました。\u003cbr\u003e\u003cbr\u003e組み込み関数を一通りチラッとでも知っていれば、何かを実装したい時にあれを使えばできそう…って考えられると思うので、元々用意されている関数なんかの知識は増やしていきたいなと思います。\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2 id=\"he45680f0bc\"\u003e参考記事\u003c/h2\u003e\u003cp\u003e\u003cbr\u003e\u003ca href=\"https://himenon.github.io/docs/javascript/simple-react-local-search-form/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://himenon.github.io/docs/javascript/simple-react-local-search-form/\u003c/a\u003e\u003cbr\u003e\u003cbr\u003e\u003ca href=\"https://qiita.com/takf-jp/items/af10bc05428b1182ece5\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://qiita.com/takf-jp/items/af10bc05428b1182ece5\u003c/a\u003e\u003cbr\u003e\u003c/p\u003e\u003c/body\u003e\u003c/html\u003e"},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"react-serch"},"buildId":"EwuWiZmkeG3lYlO_XC9fM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>